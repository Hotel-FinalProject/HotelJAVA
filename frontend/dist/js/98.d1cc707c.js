"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[98],{2098:function(e,a,t){t.r(a),t.d(a,{default:function(){return me}});var s=t(6768),n=t(4232),l=t(5130);const i={class:"details-container"},c={class:"reservation-conatiner"},o={class:"hotel-name"},d={class:"hotel-roomname"},r={class:"reservation-conatiner-info"},k={class:"check-in-conatiner"},u={class:"check-time"},v={class:"check-out-conatiner"},m={class:"check-time"},h={class:"avg-person"},L={class:"avg-person-text"},b={class:"price"},p={class:"reservation-info"},y={class:"reservation-info-conatiner"},g={class:"info-container"},f={class:"user-conatiner"},P={class:"user-conatiner"},O={class:"user-conatiner"},_={class:"payment-conatiner"},j={class:"payment-info"},x={class:"payment"},M={class:"payment-info"},C={class:"payment"},I={class:"payment-info"},N={class:"payment"},A={class:"payment-total-conatiner"},D={class:"payment-total"},w={key:0,class:"payment-modal-overlay"},S={class:"payment-modal"},V={class:"re-user-info-container"},U={class:"user-info-container"},q={class:"user-name-container"},H={class:"user-name-container"},R={class:"user-name-container"},T={class:"user-name-container"},$={class:"user-name-container"},E={class:"user-name-container"},F={class:"user-name-container"},J={class:"user-name-container"},K={class:"user-name-container"},W={class:"move-container"},X={class:"btn-container"},z={class:"btn-container"},B={class:"payment-method-conatiner"},G={class:"pyment-btn-container"},Q={class:"submit-button"},Y={class:"submit-button"},Z={class:"submit-button"},ee={class:"check-conatiner"},ae={class:"check-detail-conatiner"},te={class:"check-conatiner-detail"},se={class:"check-conatiner-detail"},ne={class:"check-conatiner-detail"},le={class:"check-conatiner-detail"},ie={class:"check-conatiner-detail"},ce=["disabled"];function oe(e,a,t,oe,de,re){const ke=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",i,[a[55]||(a[55]=(0,s.Fv)('<h3>숙소</h3><div class="cancle-info-container"><div class="cancle-info"><h4 class="cancle-info-title">예약 완료 후 무료 취소 안내</h4><div class="cancle-info-detail"> · 예약일시 기준 체크인 시각 이전일 경우 무료취소가 가능합니다.</div><div class="cancle-info-detail"> · 숙소 정책에 따라 일부 상품은 무료취소가 불가능합니다.</div><hr><div class="cancle-info-details"> 10분 이내 무료 취소 </div><div class="cancle-info-detail"> (단, 숙소 정책에 따라 취소수수료 부가 예외 규정이 적용되지 않을 수 있습니다.)</div></div></div>',2)),(0,s.Lk)("div",c,[(0,s.Lk)("h2",o,(0,n.v_)(de.dataObj.hotelName),1),(0,s.Lk)("h2",d,(0,n.v_)(de.dataObj.roomName),1),(0,s.Lk)("div",r,[(0,s.Lk)("div",k,[a[14]||(a[14]=(0,s.Lk)("div",{class:"check"},"체크인",-1)),(0,s.Lk)("h2",null,(0,n.v_)(re.formatDate(de.dataObj.userCheckIn)),1),(0,s.Lk)("div",u,(0,n.v_)(de.dataObj.checkIn),1)]),(0,s.Lk)("div",v,[a[15]||(a[15]=(0,s.Lk)("div",{class:"check"},"체크아웃",-1)),(0,s.Lk)("h2",null,(0,n.v_)(re.formatDate(de.dataObj.userCheckOut)),1),(0,s.Lk)("div",m,(0,n.v_)(de.dataObj.checkOut),1)])]),(0,s.Lk)("div",h,[a[16]||(a[16]=(0,s.Lk)("img",{class:"person-icon",src:"https://yaimg.yanolja.com/stay/static/images/v3/icon_my.png"},null,-1)),(0,s.Lk)("div",L,"예약인원 "+(0,n.v_)(de.dataObj.guestNum)+"인",1)]),(0,s.Lk)("h2",b,(0,n.v_)(Number(de.dataObj.roomPrice).toLocaleString())+"원",1),(0,s.Lk)("div",p,[(0,s.Lk)("div",y,[a[25]||(a[25]=(0,s.Lk)("h3",null,[(0,s.eW)(" 예약자 정보 "),(0,s.Lk)("span",{class:"asterisk"},"*")],-1)),(0,s.Lk)("div",g,[(0,s.Lk)("div",f,[a[17]||(a[17]=(0,s.Lk)("span",{class:"user-info"}," 예약자 이름",-1)),a[18]||(a[18]=(0,s.Lk)("span",{class:"asterisk"},"*",-1)),a[19]||(a[19]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{class:"user-input",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>de.userName=e)},null,512),[[l.Jo,de.userName]])])]),(0,s.Lk)("div",P,[a[20]||(a[20]=(0,s.Lk)("span",{class:"user-info"}," 휴대폰 번호",-1)),a[21]||(a[21]=(0,s.Lk)("span",{class:"asterisk"},"*",-1)),a[22]||(a[22]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{class:"user-input",type:"tel","onUpdate:modelValue":a[1]||(a[1]=e=>de.userPhone=e)},null,512),[[l.Jo,de.userPhone]])])]),(0,s.Lk)("div",O,[a[23]||(a[23]=(0,s.Lk)("span",{class:"user-info"}," 요청사항",-1)),a[24]||(a[24]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bo)((0,s.Lk)("input",{class:"request",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>de.request=e)},null,512),[[l.Jo,de.request]])])])])])])]),a[56]||(a[56]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",_,[a[30]||(a[30]=(0,s.Lk)("div",{class:"payment-info-title"},[(0,s.Lk)("div",{class:"payment-info-text"}," 결제 금액"),(0,s.Lk)("div",{class:"payment-info-detail"},"(세금 및 봉사료 포함)")],-1)),(0,s.Lk)("div",j,[a[26]||(a[26]=(0,s.Lk)("div",{class:"payment-text"},"상품 기본 금액",-1)),(0,s.Lk)("div",x,(0,n.v_)(de.dataObj.roomPrice?de.dataObj.roomPrice.toLocaleString():"가격 정보 없음")+"원",1)]),(0,s.Lk)("div",M,[a[27]||(a[27]=(0,s.Lk)("div",{class:"payment-text"},"추가인원",-1)),(0,s.Lk)("div",C,(0,n.v_)(de.dataObj.addPerson.toLocaleString())+"원",1)]),(0,s.Lk)("div",I,[a[28]||(a[28]=(0,s.Lk)("div",{class:"payment-text"},"숙박금액",-1)),(0,s.Lk)("div",N,(0,n.v_)(de.dataObj.addDate.toLocaleString())+"원",1)]),a[31]||(a[31]=(0,s.Lk)("hr",{class:"dot-line"},null,-1)),(0,s.Lk)("div",A,[a[29]||(a[29]=(0,s.Lk)("div",{class:"payment-info-text"},"총 결제 금액",-1)),(0,s.Lk)("div",D,(0,n.v_)(re.formattedTotal)+"원",1)])]),de.isPaymentModalVisible?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",S,[a[43]||(a[43]=(0,s.Lk)("h2",null,"결제 완료되었습니다!",-1)),a[44]||(a[44]=(0,s.eW)()),a[45]||(a[45]=(0,s.Lk)("hr",null,null,-1)),a[46]||(a[46]=(0,s.Lk)("h3",null,"결제자 정보",-1)),(0,s.Lk)("div",V,[(0,s.Lk)("div",U,[(0,s.Lk)("div",q,[a[32]||(a[32]=(0,s.Lk)("div",{class:"label"},"예약자",-1)),(0,s.Lk)("div",null,(0,n.v_)(de.userName),1)]),(0,s.Lk)("div",H,[a[33]||(a[33]=(0,s.Lk)("div",{class:"label"},"전화번호",-1)),(0,s.Lk)("div",null,(0,n.v_)(e.phone),1)]),(0,s.Lk)("div",R,[a[34]||(a[34]=(0,s.Lk)("div",{class:"label"},"호텔명",-1)),(0,s.Lk)("div",null,(0,n.v_)(de.dataObj.hotelName),1)]),(0,s.Lk)("div",T,[a[35]||(a[35]=(0,s.Lk)("div",{class:"label"},"객실명",-1)),(0,s.Lk)("div",null,(0,n.v_)(de.dataObj.roomName),1)]),(0,s.Lk)("div",$,[a[36]||(a[36]=(0,s.Lk)("div",{class:"label"},"체크인",-1)),(0,s.Lk)("div",null,(0,n.v_)(re.formatDate(de.dataObj.userCheckIn)),1)]),(0,s.Lk)("div",E,[a[37]||(a[37]=(0,s.Lk)("div",{class:"label"},"체크아웃",-1)),(0,s.Lk)("div",null,(0,n.v_)(re.formatDate(de.dataObj.userCheckOut)),1)]),(0,s.Lk)("div",F,[a[38]||(a[38]=(0,s.Lk)("div",{class:"label"},"예약인원",-1)),(0,s.Lk)("div",null,(0,n.v_)(de.dataObj.guestNum)+"명 ",1)]),(0,s.Lk)("div",J,[a[39]||(a[39]=(0,s.Lk)("div",{class:"label"},"요청사항",-1)),(0,s.Lk)("div",null,(0,n.v_)(de.request),1)]),(0,s.Lk)("div",K,[a[40]||(a[40]=(0,s.Lk)("div",{class:"label"},"결제 금액",-1)),(0,s.Lk)("div",null,(0,n.v_)(re.formattedTotal)+"원",1)])]),(0,s.Lk)("div",W,[(0,s.Lk)("div",X,[(0,s.bF)(ke,{to:"/"},{default:(0,s.k6)((()=>a[41]||(a[41]=[(0,s.Lk)("button",{class:"move-btn"},"HOME",-1)]))),_:1})]),(0,s.Lk)("div",z,[(0,s.bF)(ke,{to:"/my_page"},{default:(0,s.k6)((()=>a[42]||(a[42]=[(0,s.Lk)("button",{class:"move-btn"},"MYPAGE",-1)]))),_:1})])])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",B,[a[47]||(a[47]=(0,s.Lk)("h3",null,"결제 수단",-1)),(0,s.Lk)("div",G,[(0,s.Lk)("div",Q,[(0,s.Lk)("button",{class:(0,n.C4)(["btn-card",{"btn-card-selected":"html5_inicis"===de.selectedPaymentMethod,"btn-card":"html5_inicis"!==de.selectedPaymentMethod}]),onClick:a[3]||(a[3]=e=>re.selectPaymentMethod("html5_inicis"))}," 카드 결제 ",2)]),(0,s.Lk)("div",Y,[(0,s.Lk)("button",{class:(0,n.C4)(["btn-kakao",{"btn-kakao-selected":"kakaopay"===de.selectedPaymentMethod,"btn-kakao":"kakaopay"!==de.selectedPaymentMethod}]),onClick:a[4]||(a[4]=e=>re.selectPaymentMethod("kakaopay"))},"카카오페이",2)]),(0,s.Lk)("div",Z,[(0,s.Lk)("button",{class:(0,n.C4)(["btn-toss",{"btn-toss-selected":"tosspay"===de.selectedPaymentMethod,"btn-toss":"tosspay"!==de.selectedPaymentMethod}]),onClick:a[5]||(a[5]=e=>re.selectPaymentMethod("tosspay"))},"토스페이",2)])])]),a[57]||(a[57]=(0,s.Fv)('<div class="payment-agree-conatiner"><div class="payment-agree-top"><div class="payment-agree"><div class="payment-agree-text"> 현장결제</div><div class="payment-agree-text-detail"> 추가인원 비용등의 현장결제 발생 상품을 확인하세요.</div></div><div class="payment-agree"><div class="payment-agree-text"> 취소불가 및 수수료</div><div class="payment-agree-text-detail"> 취소 및 환불규정에 따라 취소불가, 수수료가 발생할 수 있습니다.</div></div><div class="payment-agree"><div class="payment-agree-text"> 미성년자 및 법정대리인 필수</div><div class="payment-agree-text-detail">미성년자는 법정대리인 동행 없이 투숙이 불가능합니다.</div></div></div></div>',1)),(0,s.Lk)("div",ee,[(0,s.Lk)("h3",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>de.agreeAll=e),onChange:a[7]||(a[7]=(...e)=>re.toggleAll&&re.toggleAll(...e))},null,544),[[l.lH,de.agreeAll]]),a[48]||(a[48]=(0,s.Lk)("span",{class:"check-text"},"전체 동의(선택포함)",-1))]),(0,s.Lk)("div",ae,[(0,s.Lk)("div",te,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>de.agree1=e)},null,512),[[l.lH,de.agree1]]),a[49]||(a[49]=(0,s.Lk)("span",{class:"check-text"},"[필수] 만 14세 이상 이용 동의",-1))]),(0,s.Lk)("div",se,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=e=>de.agree2=e)},null,512),[[l.lH,de.agree2]]),a[50]||(a[50]=(0,s.Lk)("span",{class:"check-text"},"[필수] 이용 규칙",-1))]),(0,s.Lk)("div",ne,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=e=>de.agree3=e)},null,512),[[l.lH,de.agree3]]),a[51]||(a[51]=(0,s.Lk)("span",{class:"check-text"},"[필수] 취소 및 환불 규정",-1))]),(0,s.Lk)("div",le,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=e=>de.agree4=e)},null,512),[[l.lH,de.agree4]]),a[52]||(a[52]=(0,s.Lk)("span",{class:"check-text"},"[선택] 이벤트, 혜택 정보 수신 동의",-1))]),(0,s.Lk)("div",ie,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=e=>de.agree5=e)},null,512),[[l.lH,de.agree5]]),a[53]||(a[53]=(0,s.Lk)("span",{class:"check-text"},"[선택] 이벤트, 혜택 정보 전송을 위한 개인정보 수집 및 이용 동의",-1))])]),(0,s.Lk)("div",null,[(0,s.Lk)("button",{disabled:!re.canSubmit,class:"payment-btn",onClick:a[13]||(a[13]=(...e)=>re.submitReservationIfPossible&&re.submitReservationIfPossible(...e))},(0,n.v_)(Number(de.dataObj.roomPrice).toLocaleString())+"원 결제하기",9,ce)]),a[54]||(a[54]=(0,s.Lk)("div",{class:"info"}," (주) HotelJava플랫폼은 통신판매 중개자로서 통신판매의 당사자가 아니며 상품 예약, 이용 및 환불과는 관련한 의무와 책임은 각 판매자에게 있습니다. ",-1))])])}var de=t(4373),re=t(6698),ke={name:"paymentPage",data(){return{userName:"",userPhone:"",dataObj:history.state||{},isLoggedIn:!1,request:"",range:{start:null,end:null},isPaymentModalVisible:!1,agreeAll:!1,agree1:!1,agree2:!1,agree3:!1,agree4:!1,agree5:!1,selectedPaymentMethod:null}},async created(){const e=(0,re.n)();try{await e.checkLoginStatus(),e.LoggedIn?(this.isLoggedIn=e.LoggedIn,this.userName=e.currentUser,this.userPhone=e.phone,this.userid=e.userId,this.userName=e.userName,this.phone=e.phone,this.token=e.accessToken):console.log("로그인되지 않았습니다.")}catch(a){console.error("로그인 상태 확인 실패:",a),alert("로그인 상태 확인 중 오류가 발생했습니다.")}},computed:{canSubmit(){return(this.agreeAll||this.agree1&&this.agree2&&this.agree3)&&this.selectedPaymentMethod},formattedTotal(){return(this.dataObj.addPerson+this.dataObj.roomPrice+this.dataObj.addDate).toLocaleString("ko-KR")}},methods:{submitReservationIfPossible(){this.canSubmit&&this.selectedPaymentMethod?this.submitReservation(this.selectedPaymentMethod):alert("결제 수단을 선택해 주세요.")},async submitReservation(e){const a=this.token,t=this.userid,s=window.IMP;s.init("imp45605876"),s.request_pay({pg:e,pay_method:"card",merchant_uid:`mid_${(new Date).getTime()}`,name:"숙소 예약 결제",amount:this.dataObj.roomPrice,buyer_name:this.userName,buyer_tel:this.userPhone},(async e=>{if(e.success){const n=e.imp_uid,l=e=>{const a=new Date(e);return a.setDate(a.getDate()),a.toISOString()},i=this.dataObj.userCheckIn?l(this.dataObj.userCheckIn):l(new Date),c=this.dataObj.userCheckOut?l(this.dataObj.userCheckOut):l(new Date);try{const e=await de.A.post(`/api/auth/reservation/${n}`,{userId:t,checkIn:i,checkOut:c,totalPrice:this.dataObj.roomPrice,roomId:this.dataObj.roomId,request:this.request,guestNum:this.dataObj.guestNum,imp_uid:n},{headers:{Authorization:`Bearer ${a}`}});this.showPaymentModal(),console.log(e)}catch(s){console.error("서버 요청 실패:",s),alert("결제 정보 저장에 실패하였습니다.")}}else alert(`결제에 실패하였습니다: ${e.error_msg}`)}))},toggleAll(){this.agree1=this.agreeAll,this.agree2=this.agreeAll,this.agree3=this.agreeAll,this.agree4=this.agreeAll,this.agree5=this.agreeAll},showPaymentModal(){this.isPaymentModalVisible=!0,this.$nextTick((()=>{document.querySelector(".payment-modal-overlay").classList.add("active")}))},formatDate(e){const a={year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"},t=new Date(e).toLocaleDateString("ko-KR",a);return t.replace(/\.$/,"").replace(" ","")},selectPaymentMethod(e){this.selectedPaymentMethod=e}}},ue=t(1241);const ve=(0,ue.A)(ke,[["render",oe]]);var me=ve}}]);
//# sourceMappingURL=98.d1cc707c.js.map