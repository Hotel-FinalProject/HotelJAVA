(function(){"use strict";var e={412:function(e,t,a){a.d(t,{Ad:function(){return l},DQ:function(){return C},E7:function(){return c},E_:function(){return n},Gm:function(){return L},J:function(){return p},KW:function(){return h},Lx:function(){return i},PY:function(){return m},R1:function(){return I},Ro:function(){return r},T2:function(){return k},TH:function(){return y},UR:function(){return v},Wr:function(){return b},bx:function(){return f},od:function(){return g},ug:function(){return d},uj:function(){return w},vb:function(){return u}});var o=a(4373);const s=o.A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});function n(e,t){return s.post("/users/signup",e,{headers:{verificationToken:`Bearer ${t}`}})}function i(e){return s.post("/users/login",e)}function r(e){return s.get("/users/check-email",{params:{email:e}})}function l(e){return s.post("/users/find-id",{name:e})}function c(e,t){return s.post("/users/send-verification-email",{email:e,mode:t})}function u(e){return s.get("/users/verify-email",{params:{token:e}})}function d(e){return s.get("/auth/users/me",{headers:{Authorization:`Bearer ${e}`}})}const h=(e,t)=>s.post("/users/reset-password",{email:e,token:t});function p(e,t){return s.put("/auth/users/update",e,{headers:{Authorization:`Bearer ${t}`}})}function m(e,t){return s.post("/auth/users/verify-password",{password:e},{headers:{Authorization:`Bearer ${t}`}})}function v(e,t,a){return s.post("/auth/users/reset-password",{email:e,newPassword:t,token:a})}function g(e){return s.delete("/auth/users/delete",{headers:{Authorization:`Bearer ${e}`}})}function k(e){return s.get("/auth/reservationInfo",{headers:{Authorization:`Bearer ${e}`}})}function f(e,t){for(let[a,o]of e.entries())console.log(`${a}: ${o}`);return s.post("/auth/reviews",e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})}function y(e){return s.get(`/reviews/hotel/${e}`)}function w(e,t){return s.get(`/auth/reviews/user/${e}`,{headers:{Authorization:`Bearer ${t}`}})}function L(e,t,a){return s.put(`/auth/reviews/${e}`,t,{headers:{Authorization:`Bearer ${a}`}})}function b(e,t){return s.delete(`/auth/reviews/${e}`,{headers:{Authorization:`Bearer ${t}`}})}function C(e,t){return s.post("/auth/reports",e,{headers:{Authorization:`Bearer ${t}`}})}function I(e){return s.get("/auth/favorites/favoriteInfo",{headers:{Authorization:`Bearer ${e}`}})}},6054:function(e,t,a){var o=a(5130),s=a(6768);function n(e,t,a,o,n,i){const r=(0,s.g2)("NavBar"),l=(0,s.g2)("DefaultLayout");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.bF)(l)],64)}const i={class:"layout"},r={class:"main-content"};function l(e,t,a,o,n,l){const c=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("main",r,[(0,s.bF)(c)])])}var c={name:"DefaultLayout"},u=a(1241);const d=(0,u.A)(c,[["render",l],["__scopeId","data-v-48edadd4"]]);var h=d,p=a(4232);const m={class:"navbar"},v={class:"navbar_logo"},g={class:"navbar_items"},k={key:0,class:"navbar_item"},f={key:1,class:"navbar_item"};function y(e,t,a,o,n,i){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",m,[(0,s.Lk)("div",v,[(0,s.Lk)("span",{class:"brand_name",onClick:t[0]||(t[0]=e=>i.to_home())},"HotelJava")]),(0,s.Lk)("div",g,[o.isLoggedIn?((0,s.uX)(),(0,s.CE)("ul",f,[(0,s.Lk)("li",null,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.logout&&o.logout(...e)),class:"logout_btn"},"로그아웃")]),(0,s.Lk)("li",null,[(0,s.Lk)("span",{class:"my_page_btn",onClick:t[2]||(t[2]=(...e)=>i.to_my_page&&i.to_my_page(...e)),onMouseover:t[3]||(t[3]=e=>o.hover=!0),onMouseleave:t[4]||(t[4]=e=>o.hover=!1)},(0,p.v_)(o.hover?"마이페이지":o.userName+"님"),33)])])):((0,s.uX)(),(0,s.CE)("ul",k,[(0,s.Lk)("li",null,[(0,s.bF)(r,{to:"/login"},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.Lk)("span",{class:"login_btn"},"로그인",-1)]))),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(r,{to:"/register"},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.Lk)("span",{class:"signup_btn"},"회원가입",-1)]))),_:1})])]))])])}a(4114);var w=a(6698),L=a(144),b={name:"theNavbar",setup(){const e=(0,w.n)(),t=(0,s.EW)((()=>e.LoggedIn)),a=(0,s.EW)((()=>e.userName||"사용자")),o=(0,L.KR)(!1),n=()=>{e.logout()};return{isLoggedIn:t,userName:a,hover:o,logout:n}},methods:{to_my_page(){this.$router.push("/my_page")},to_home(){this.$router.push("/")}}};const C=(0,u.A)(b,[["render",y],["__scopeId","data-v-941c122c"]]);var I=C,E={name:"App",components:{DefaultLayout:h,NavBar:I}};const R=(0,u.A)(E,[["render",n]]);var _=R,S=a(5234),P=a(1387);const A={class:"main-container"},X={class:"search-container"},U={key:0,class:"autocomplete-list"},M=["onClick"],T={class:"autocomplete-hotel-name"},$={class:"hotel-address"},D={key:0,class:"no-results"},N={class:"hotel_list_container"},V={class:"hotel_grid"},F=["src"],Q={class:"hotel-name"},H={class:"hotel-info"},x={class:"rating"},O={class:"hotel_grid"},q=["src"],K={class:"hotel-name"},B={class:"hotel-info"},J={class:"rating"},W={class:"hotel_grid"},j=["src"],z={class:"hotel-name"},G={class:"hotel-info"},Y={class:"rating"};function Z(e,t,a,n,i,r){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",A,[(0,s.Lk)("div",X,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"search-bar",type:"text",placeholder:"호텔 검색",onClick:t[1]||(t[1]=(...e)=>r.searchHotel&&r.searchHotel(...e))},null,512),[[o.Jo,i.searchQuery]]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.searchHotel&&r.searchHotel(...e)),class:"search-button"},"🔍")]),i.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("ul",U,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.autocompleteResults,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.hotelId,onClick:a=>e.goToHotelDetail(t.hotelId),class:"autocomplete-item"},[(0,s.Lk)("span",T,(0,p.v_)(t.name),1),(0,s.Lk)("span",$,(0,p.v_)(t.address||"주소 정보 없음"),1)],8,M)))),128)),i.noResults?((0,s.uX)(),(0,s.CE)("li",D,"연관된 검색어가 없습니다.")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.fetchRandomHotels&&r.fetchRandomHotels(...e)),class:"refresh-button"},"🔄"),(0,s.Lk)("div",N,[(0,s.Lk)("div",V,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.randomHotels,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.hotelId,class:"hotel-container"},[(0,s.bF)(l,{to:`/hotel-details/${e.hotelId}`},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.imageUrl||i.defaultImage,class:"img-container",alt:"Hotel Image"},null,8,F)])),_:2},1032,["to"]),(0,s.Lk)("div",Q,(0,p.v_)(e.name),1),(0,s.Lk)("div",H,[(0,s.Lk)("span",x,"⭐"+(0,p.v_)(e.rating||0),1),(0,s.Lk)("span",null,"("+(0,p.v_)(e.reviewCount)+")",1)])])))),128))]),t[4]||(t[4]=(0,s.Lk)("h2",{class:"review-title"},"리뷰 Top 10",-1)),(0,s.Lk)("div",O,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.topByReviewCount,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.hotelId,class:"hotel-container"},[(0,s.bF)(l,{to:`/hotel-details/${e.hotelId}`},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.imageUrl||i.defaultImage,class:"img-container",alt:"Hotel Image"},null,8,q)])),_:2},1032,["to"]),(0,s.Lk)("div",K,(0,p.v_)(e.name),1),(0,s.Lk)("div",B,[(0,s.Lk)("span",J,"⭐"+(0,p.v_)(e.rating||0),1),(0,s.Lk)("span",null,"("+(0,p.v_)(e.reviewCount)+")",1)])])))),128))]),t[5]||(t[5]=(0,s.Lk)("h2",{class:"review-title"},"별점 Top 10",-1)),(0,s.Lk)("div",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.topByRating,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.hotelId,class:"hotel-container"},[(0,s.bF)(l,{to:`/hotel-details/${e.hotelId}`},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.imageUrl||i.defaultImage,class:"img-container",alt:"Hotel Image"},null,8,j)])),_:2},1032,["to"]),(0,s.Lk)("div",z,(0,p.v_)(e.name),1),(0,s.Lk)("div",G,[(0,s.Lk)("span",Y,"⭐"+(0,p.v_)(e.rating||0),1),(0,s.Lk)("span",null,"("+(0,p.v_)(e.reviewCount)+")",1)])])))),128))])])])}var ee=a(4373);const te=ee.A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});function ae(){return te.get("/hotels/top10")}var oe={name:"MainPage",data(){return{searchQuery:"",autocompleteResults:[],randomHotels:[],topByReviewCount:[],topByRating:[],defaultImage:"https://png.pngtree.com/png-vector/20240613/ourlarge/pngtree-modern-hotel-icon-with-palm-trees-black-isolated-on-white-background-vector-png-image_7010310.png",noResults:!1}},created(){this.fetchRandomHotels(),this.fetchTopHotelList()},methods:{async fetchRandomHotels(){try{const e=await ee.A.get("/api/hotels/random");this.randomHotels=e.data}catch(e){console.error("랜덤 호텔 데이터를 가져오는 중 오류 발생:",e)}},fetchAutocompleteResults(){if(this.autocompleteResults=[],this.searchQuery.length>0){const e=this.searchQuery.replace(/\s+/g,"");ee.A.get(`/api/hotels/search?query=${e}`).then((e=>{this.autocompleteResults=e.data,this.noResults=0===this.autocompleteResults.length})).catch((e=>{console.error("자동 완성 결과를 가져오는 중 오류 발생:",e),this.autocompleteResults=[],this.noResults=!0}))}else this.autocompleteResults=[],this.noResults=!1},searchHotel(){this.$router.push({path:"/search-results",query:{query:this.searchQuery}})},goToSearchPage(){this.$router.push({path:"/search-page",query:{query:this.searchQuery}})},async fetchTopHotelList(){try{const e=await ae();let t=e.data.topByReviewCount,a=e.data.topByRating;t=t.sort(((e,t)=>t.reviewCount!==e.reviewCount?t.reviewCount-e.reviewCount:e.name.localeCompare(t.name))),a=a.sort(((e,t)=>t.rating!==e.rating?t.rating-e.rating:e.name.localeCompare(t.name))),this.topByReviewCount=t,this.topByRating=a}catch(e){console.error("목록 조회 중 오류 발생: ",e)}}}};const se=(0,u.A)(oe,[["render",Z],["__scopeId","data-v-231a5112"]]);var ne=se;const ie={class:"container"},re={class:"form-group"},le={class:"form-group"},ce={class:"form-group"},ue={class:"form-group email-group"},de={class:"form-group"};function he(e,t,a,n,i,r){return(0,s.uX)(),(0,s.CE)("div",ie,[(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[t[11]||(t[11]=(0,s.Lk)("h2",null,"회원가입",-1)),(0,s.Lk)("div",re,[t[6]||(t[6]=(0,s.Lk)("label",{for:"name"},"이름",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,512),[[o.Jo,n.name]])]),(0,s.Lk)("div",le,[t[7]||(t[7]=(0,s.Lk)("label",{for:"password"},"비밀번호",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,512),[[o.Jo,n.password]])]),(0,s.Lk)("div",ce,[t[8]||(t[8]=(0,s.Lk)("label",{for:"passwordConfirm"},"비밀번호 확인",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":t[2]||(t[2]=e=>n.passwordConfirm=e)},null,512),[[o.Jo,n.passwordConfirm]])]),(0,s.Lk)("div",ue,[(0,s.Lk)("div",null,[t[9]||(t[9]=(0,s.Lk)("label",{for:"email"},"이메일",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>n.authStore.email=e),disabled:""},null,512),[[o.Jo,n.authStore.email]])])]),(0,s.Lk)("div",de,[t[10]||(t[10]=(0,s.Lk)("label",{for:"phone"},"전화번호",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[4]||(t[4]=e=>n.phone=e)},null,512),[[o.Jo,n.phone]])]),t[12]||(t[12]=(0,s.Lk)("button",{type:"submit",class:"signup-button"},"회원가입",-1))],32)])}var pe={name:"SignupForm",setup(){const e=(0,w.n)(),t=(0,P.rd)(),a=(0,L.KR)(""),o=(0,L.KR)(""),n=(0,L.KR)(""),i=(0,L.KR)(""),r=(0,L.KR)("");(0,s.sV)((()=>{e.verificationToken?a.value=e.email:t.push("/verify-email?mode=signup")}));const l=async()=>{if(i.value!==r.value)return void alert("비밀번호가 일치하지 않습니다.");e.verificationToken||(alert("이메일 인증 토큰이 없습니다. 이메일 인증을 다시 진행해주세요."),t.push("/verify-email"));const s={email:a.value,name:o.value,phone:n.value,password:i.value};try{const a=await e.signup(s);a&&201===a.status?(alert("회원가입이 완료되었습니다!"),t.push("/login")):alert(`회원가입 중 오류 발생: ${a.data}`)}catch(l){l.response&&l.response.data?alert(`회원가입 중 오류 발생: ${l.response.data}`):alert("회원가입 중 알 수 없는 오류가 발생했습니다."),console.error(`회원가입 중 오류 발생: ${l}`)}};return{email:a,name:o,phone:n,password:i,passwordConfirm:r,submitForm:l,authStore:e}}};const me=(0,u.A)(pe,[["render",he],["__scopeId","data-v-13e978e4"]]);var ve=me;const ge={class:"container"},ke={class:"login-form"},fe={class:"input-group"},ye={class:"input-group"},we={class:"top-actions"},Le={class:"social-login"};function be(e,t,a,n,i,r){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",ge,[(0,s.Lk)("div",ke,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"title"},"로그인",-1)),(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"]))},[(0,s.Lk)("div",fe,[t[5]||(t[5]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e)},null,512),[[o.Jo,i.email]])]),(0,s.Lk)("div",ye,[t[6]||(t[6]=(0,s.Lk)("label",{for:"password"},"비밀번호",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"passwd","onUpdate:modelValue":t[1]||(t[1]=e=>i.passwd=e)},null,512),[[o.Jo,i.passwd]])]),(0,s.Lk)("div",we,[(0,s.bF)(l,{to:"/find-my-id"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.Lk)("span",{class:"find-id-btn"},"아이디 찾기",-1)]))),_:1}),t[8]||(t[8]=(0,s.Lk)("button",{type:"submit",class:"login-button"},"로그인",-1))])],32),t[10]||(t[10]=(0,s.Lk)("div",{class:"divider"},[(0,s.Lk)("span",null,"SNS LOGIN")],-1)),(0,s.Lk)("div",Le,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.googleLogin&&r.googleLogin(...e)),class:"social-button google"},"G"),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.naverLogin&&r.naverLogin(...e)),class:"social-button naver"},"N")])])])}var Ce={name:"LoginForm",data(){return{email:"",passwd:""}},methods:{async googleLogin(){window.location.href="http://localhost:8081//oauth2/authorization/google"},async naverLogin(){window.location.href="http://localhost:8081//oauth2/authorization/naver"},async submitForm(){const e={email:this.email,passwd:this.passwd};try{const t=(0,w.n)();await t.login(e),alert("로그인 성공!"),mo.push({path:"/"})}catch(t){console.error("로그인 중 오류 발생: ",t),alert("로그인 실패. 이메일과 비밀번호를 확인하세요.")}}}};const Ie=(0,u.A)(Ce,[["render",be],["__scopeId","data-v-68139bc6"]]);var Ee=Ie;function Re(e,t,a,o,n,i){return(0,s.uX)(),(0,s.CE)("div",null,"로그인 처리 중입니다...")}var _e={name:"OAuthRedirectHandler",setup(){const e=(0,w.n)(),t=(0,P.rd)(),a=(0,P.lq)(),o=async()=>{const o=a.query.token;if(o){e.setAccessToken(o);try{const a=await ee.A.get("/api/users/me",{headers:{Authorization:`Bearer ${o}`}});if(a&&200===a.status){const s=a.data;e.currentUser=s.email,e.userId=s.userId,e.userName=s.name,e.phone=s.phone,e.LoggedIn=!0,localStorage.setItem("userInfo",JSON.stringify({userName:s.name,userId:s.userId,email:s.email,phone:s.phone})),sessionStorage.setItem("token",o),t.push({path:"/"})}else console.error("사용자 정보를 가져오는 데 실패했습니다."),alert("사용자 정보를 가져오는 데 실패했습니다. 다시 시도해 주세요."),t.push({path:"/login"})}catch(s){console.error("사용자 정보 요청 실패:",s),alert("사용자 정보 요청에 실패했습니다. 다시 시도해 주세요."),t.push({path:"/login"})}}else alert("오류가 발생했습니다. 로그인 실패."),t.push({path:"/login"})};return o(),{}}};const Se=(0,u.A)(_e,[["render",Re]]);var Pe=Se;const Ae={class:"verification-container"},Xe={key:0},Ue=["disabled"],Me={key:1},Te={key:2};function $e(e,t,a,n,i,r){return(0,s.uX)(),(0,s.CE)("div",Ae,[t[7]||(t[7]=(0,s.Lk)("h2",null,"이메일 인증",-1)),e.verificationToken?n.isVerified?((0,s.uX)(),(0,s.CE)("div",Me,[t[5]||(t[5]=(0,s.Lk)("p",null,"이메일 인증이 완료되었습니다.",-1)),"signup"===n.mode?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>n.proceedToSignup&&n.proceedToSignup(...e))}," 회원가입 페이지로 이동 ")):"resetPassword"===n.mode?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:t[4]||(t[4]=(...e)=>n.proceedToResetPassword&&n.proceedToResetPassword(...e))}," 비밀번호 재설정 페이지로 이동 ")):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",Te,t[6]||(t[6]=[(0,s.Lk)("p",null,"이메일 인증 중입니다...",-1)]))):((0,s.uX)(),(0,s.CE)("div",Xe,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),placeholder:"이메일을 입력하세요",onBlur:t[1]||(t[1]=e=>"signup"===n.mode?n.checkEmailAvailability():null)},null,544),[[o.Jo,n.email]]),"signup"===n.mode&&n.emailMessage?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,p.C4)({error:!n.isEmailAvailable,success:n.isEmailAvailable})},(0,p.v_)(n.emailMessage),3)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.sendVerificationEmail&&n.sendVerificationEmail(...e)),disabled:"signup"===n.mode&&!n.isEmailAvailable}," 인증 요청 ",8,Ue)]))])}var De={name:"EmailVerificationPage",setup(){const e=(0,P.lq)(),t=(0,P.rd)(),a=(0,w.n)(),o=(0,L.KR)(e.query.mode),n=(0,L.KR)(e.query.token),i=(0,L.KR)(""),r=(0,L.KR)(!1),l=(0,L.KR)(""),c=(0,L.KR)(!1);console.log("초기 verificationToken:",n.value),console.log("초기 mode:",o.value);const u=async()=>{if(!i.value)return l.value="이메일을 입력해주세요.",void(c.value=!1);try{await a.checkEmailAvailability(i.value),l.value=a.emailMessage,c.value=a.isEmailAvailable}catch(e){console.error("이메일 중복 확인 실패:",e),l.value="이메일 중복 확인 중 오류가 발생했습니다.",c.value=!1}},d=async()=>{if(i.value)if("signup"!==o.value||c.value)try{await a.sendVerificationEmail(i.value,o.value),alert("인증 이메일이 발송되었습니다. 메일을 확인해주세요.")}catch(e){console.error("이메일 발송 실패:",e),alert("이메일 발송 중 오류가 발생했습니다.")}else alert("사용할 수 없는 이메일입니다. 다른 이메일을 사용해주세요.");else alert("이메일을 입력해주세요.")};(0,s.wB)(n,(async e=>{if(e)try{console.log("인증 요청을 보낼 토큰:",e);const s=await a.verifyEmailToken(e);console.log("스프링에서 받은 이메일 인증 결과:",s.data),s.data&&s.data.success?(r.value=!0,a.verificationToken=e,i.value=s.data.email,a.email=s.data.email,"signup"===o.value?t.push({path:"/register"}):"resetPassword"===o.value?t.push({path:"/reset-password"}):"editPassword"===o.value&&(localStorage.setItem("verifiedEmail",i.value),localStorage.setItem("verificationToken",e),alert("이메일 인증이 완료되었습니다. 비밀번호 변경을 진행해주세요."),window.close())):(console.error("응답 데이터에서 success 값을 찾을 수 없습니다.",s),alert("이메일 인증에 실패했습니다. 토큰이 만료되었거나 유효하지 않습니다. 다시 인증을 요청하세요."),t.push({path:"/verify-email",query:{mode:o.value}}))}catch(s){console.error("이메일 인증 중 오류 발생: ",s),alert("유효하지 않은 인증 토큰입니다.")}}),{immediate:!0});const h=()=>{t.push({path:"/register"})},p=()=>{t.push({path:"/reset-password"})};return{email:i,emailMessage:l,isEmailAvailable:c,isVerified:r,mode:o,checkEmailAvailability:u,sendVerificationEmail:d,proceedToSignup:h,proceedToResetPassword:p}}};const Ne=(0,u.A)(De,[["render",$e],["__scopeId","data-v-3cfa773a"]]);var Ve=Ne;const Fe={class:"password-reset-container"},Qe={key:0},He={key:1};function xe(e,t,a,o,n,i){return(0,s.uX)(),(0,s.CE)("div",Fe,[t[3]||(t[3]=(0,s.Lk)("h2",null,"비밀번호 재설정",-1)),o.isEmailSent?((0,s.uX)(),(0,s.CE)("div",He,t[2]||(t[2]=[(0,s.Lk)("p",null,"임시 비밀번호가 이메일로 발송되었습니다. 이메일을 확인하세요.",-1)]))):((0,s.uX)(),(0,s.CE)("div",Qe,[t[1]||(t[1]=(0,s.Lk)("p",null,"임시 비밀번호를 발급하기 위해 이메일 인증을 완료하세요.",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.sendResetPasswordEmail&&o.sendResetPasswordEmail(...e))},"비밀번호 재설정 요청")]))])}const Oe=(0,S.nY)("resetPassword",{state:()=>({email:"",token:""}),actions:{setEmail(e){this.email=e},setToken(e){this.token=e},clearData(){this.email="",this.token=""}}});var qe=a(412),Ke={name:"PasswordResetPage",setup(){const e=Oe(),t=(0,w.n)(),a=(0,P.rd)(),o=(0,L.KR)(!1);(0,s.sV)((()=>{t.verificationToken&&t.email?(e.email=t.email,e.token=t.verificationToken):(alert("이메일 인증 정보가 없습니다. 이메일 인증 페이지로 이동합니다."),a.push({path:"/verify-email",query:{mode:"resetPassword"}}))}));const n=async()=>{if(e.email&&e.token)try{const t=await(0,qe.KW)(e.email,e.token);200===t.status?(o.value=!0,alert("임시 비밀번호가 이메일로 발송되었습니다.")):alert("비밀번호 재설정 요청 중 오류가 발생했습니다.")}catch(t){console.error("비밀번호 재설정 요청 실패:",t),alert("비밀번호 재설정 중 오류가 발생했습니다. 다시 시도해주세요.")}else alert("이메일 인증 정보가 없습니다. 이메일 인증을 먼저 해주세요.")};return{isEmailSent:o,sendResetPasswordEmail:n}}};const Be=(0,u.A)(Ke,[["render",xe],["__scopeId","data-v-61bf98a0"]]);var Je=Be;const We={class:"mypage-container"},je={class:"router-view-container"},ze={class:"favorite-hotels"},Ge={class:"hotel-list"},Ye=["src"],Ze={class:"hotel-name"},et={key:0};function tt(e,t,a,o,n,i){const r=(0,s.g2)("SidebarComponent"),l=(0,s.g2)("router-view"),c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",We,[(0,s.bF)(r,{class:"sidebar"}),(0,s.Lk)("div",je,[(0,s.bF)(l,null,{default:(0,s.k6)((({Component:e})=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e),{"user-name":n.userName,email:n.email,phone:n.phone,reviews:n.reviews,onUpdate:i.handleReviewUpdated,"logged-in-user-id":n.loggedInUserId},null,40,["user-name","email","phone","reviews","onUpdate","logged-in-user-id"]))])),_:1})]),(0,s.Lk)("div",ze,[t[0]||(t[0]=(0,s.Lk)("h2",null,"찜한 호텔 목록",-1)),(0,s.Lk)("div",Ge,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.favoriteHotels,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"hotel-item",key:t},[(0,s.bF)(c,{to:`/hotel-details/${e.hotelId}`,class:"hotel-link"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.hotelImage,alt:"Hotel Image",class:"hotel-image"},null,8,Ye),(0,s.Lk)("span",Ze,(0,p.v_)(e.hotelName),1)])),_:2},1032,["to"])])))),128)),0===n.favoriteHotels.length?((0,s.uX)(),(0,s.CE)("div",et,"찜한 호텔 목록이 없습니다.")):(0,s.Q3)("",!0)])])])}const at={class:"sidebar"};function ot(e,t){const a=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",at,[t[3]||(t[3]=(0,s.Lk)("h2",null,"내 정보",-1)),(0,s.bF)(a,{to:"/my_page","exact-active-class":"active-link"},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.eW)("내 정보 및 리뷰")]))),_:1}),(0,s.bF)(a,{to:"/my_page/reservations","exact-active-class":"active-link"},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.eW)("예약 내역 및 예약 현황")]))),_:1}),(0,s.bF)(a,{to:"/my_page/edit-info","exact-active-class":"active-link"},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.eW)("계정 설정")]))),_:1})])}const st={},nt=(0,u.A)(st,[["render",ot],["__scopeId","data-v-7cd401e6"]]);var it=nt,rt={name:"MyPage",components:{SidebarComponent:it},data(){return{userName:"",email:"",phone:"",reviews:[],favoriteHotels:[],loggedInUserId:null,intervalId:null}},mounted(){const e=JSON.parse(localStorage.getItem("userInfo"));e?(this.userName=e.userName||"이름을 추가해주세요.",this.email=e.email||"이메일을 추가해주세요.",this.phone=e.phone||"전화번호를 추가해주세요.",this.loggedInUserId=e.userId,this.fetchUserReviews(),this.fetchUserFavorite(),this.startFetchingReviews()):console.log("로컬 스토리지에 userInfo가 없습니다.")},beforeUnmount(){this.intervalId&&clearInterval(this.intervalId)},methods:{async fetchUserReviews(){try{const e=sessionStorage.getItem("token"),t=await(0,qe.uj)(this.loggedInUserId,e);this.reviews=t.data}catch(e){console.error("리뷰 데이터를 가져오는 데 실패했습니다:",e)}},startFetchingReviews(){this.intervalId=setInterval(this.fetchUserReviews,3e4)},async fetchUserFavorite(){try{const e=sessionStorage.getItem("token"),t=await(0,qe.R1)(e);this.favoriteHotels=t.data}catch(e){console.error("찜한 호텔 목록 데이터를 가져오는 데 실패했습니다:",e)}},handleReviewUpdated(){this.fetchUserReviews()}}};const lt=(0,u.A)(rt,[["render",tt],["__scopeId","data-v-caa00d66"]]);var ct=lt;const ut={class:"content"},dt={class:"user-info"},ht={class:"review-section"},pt={class:"review-list"},mt={key:0,class:"no-reviews"},vt=["onClick"],gt={class:"review-header"},kt={class:"review-rating"},ft={class:"review-date"},yt={class:"review-content"},wt={class:"image-gallery"},Lt=["src","onClick"],bt={class:"review-actions"},Ct=["onClick"],It=["onClick"],Et=["src"];function Rt(e,t,a,o,n,i){const r=(0,s.g2)("ReviewModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ut,[(0,s.Lk)("div",dt,[t[1]||(t[1]=(0,s.Lk)("h2",null,"내 정보",-1)),(0,s.Lk)("p",null,"이름: "+(0,p.v_)(a.userName||"이름을 추가해 주세요."),1),(0,s.Lk)("p",null,"이메일: "+(0,p.v_)(a.email||"이메일을 추가해 주세요."),1),(0,s.Lk)("p",null,"전화번호: "+(0,p.v_)(a.phone||"전화번호를 추가해 주세요."),1)])]),(0,s.Lk)("div",ht,[t[2]||(t[2]=(0,s.Lk)("h2",null,"리뷰",-1)),(0,s.Lk)("div",pt,[0===a.reviews.length?((0,s.uX)(),(0,s.CE)("div",mt," 작성한 리뷰가 없습니다. ")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.reviews,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"review",key:t},[(0,s.Lk)("h3",{class:"hotel-name",onClick:t=>i.goToHotel(e.hotelId)},(0,p.v_)(e.hotelName),9,vt),(0,s.Lk)("div",gt,[(0,s.Lk)("div",kt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(t=>(0,s.Lk)("span",{key:t,class:(0,p.C4)(["star",{filled:t<=e.rating}])}," ★ ",2))),64))]),(0,s.Lk)("span",ft,(0,p.v_)(e.date),1)]),(0,s.Lk)("div",yt,(0,p.v_)(e.content),1),(0,s.Lk)("div",wt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.imageUrl,((e,t)=>((0,s.uX)(),(0,s.CE)("img",{src:e,key:t,class:"thumbnail",onClick:t=>i.openLightbox(e)},null,8,Lt)))),128))]),(0,s.Lk)("div",bt,[(0,s.Lk)("button",{class:"edit-button",onClick:t=>i.openEditModal(e)}," 수정하기 ",8,Ct),(0,s.Lk)("button",{class:"delete-button",onClick:t=>i.confirmDelete(e.reviewId)}," 삭제하기 ",8,It)])])))),128))]),n.lightboxImage?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"lightbox",onClick:t[0]||(t[0]=(...e)=>i.closeLightbox&&i.closeLightbox(...e))},[(0,s.Lk)("img",{src:n.lightboxImage,alt:"Review Image"},null,8,Et)])):(0,s.Q3)("",!0),n.isModalOpen?((0,s.uX)(),(0,s.Wv)(r,{key:1,isEdit:n.isEditMode,initialData:n.selectedReviewData,onSubmit:i.handleReviewSubmit,onClose:i.closeModal},null,8,["isEdit","initialData","onSubmit","onClose"])):(0,s.Q3)("",!0)])],64)}const _t={class:"modal-content"},St={key:0},Pt={key:1},At={class:"rating-container"},Xt=["onClick"],Ut={key:2,class:"image-upload-container"},Mt={class:"image-preview"},Tt=["src"],$t=["onClick"],Dt={class:"modal-actions"};function Nt(e,t,a,n,i,r){return(0,s.uX)(),(0,s.CE)("div",{class:"modal-overlay",onClick:t[4]||(t[4]=(0,o.D$)(((...t)=>e.closeModal&&e.closeModal(...t)),["self"]))},[(0,s.Lk)("div",_t,[a.isEdit?((0,s.uX)(),(0,s.CE)("h2",St,"리뷰 수정")):((0,s.uX)(),(0,s.CE)("h2",Pt,"리뷰 작성")),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.reviewContent=e),placeholder:"리뷰 내용을 입력해주세요",rows:"4"},null,512),[[o.Jo,i.reviewContent]]),(0,s.Lk)("div",At,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("span",{key:e,class:(0,p.C4)(["star",{selected:e<=i.rating}]),onClick:t=>r.setRating(e)}," ★ ",10,Xt))),64))]),a.isEdit?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ut,[(0,s.Lk)("input",{type:"file",accept:"image/*",multiple:"",onChange:t[1]||(t[1]=(...e)=>r.handleImageUpload&&r.handleImageUpload(...e))},null,32)])),(0,s.Lk)("div",Mt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.uploadedImages,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"image-preview-item"},[(0,s.Lk)("img",{src:e.url,alt:"Preview"},null,8,Tt),a.isEdit?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>r.removeImage(t)},"삭제",8,$t))])))),128))]),(0,s.Lk)("div",Dt,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.submitReview&&r.submitReview(...e))},(0,p.v_)(a.isEdit?"수정":"작성"),1),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...t)=>e.closeModal&&e.closeModal(...t))},"취소")])])])}var Vt={props:{isEdit:Boolean,initialData:Object},data(){return{reviewContent:"",rating:0,uploadedImages:[]}},methods:{setRating(e){this.rating=e},handleImageUpload(e){if(this.isEdit)return;const t=Array.from(e.target.files);t.length?t.forEach((e=>{const t=new FileReader;t.onload=t=>{t.target&&t.target.result?this.uploadedImages.push({file:e,url:t.target.result}):console.error("이미지 로딩 실패:",t)},t.readAsDataURL(e)})):console.error("이미지 파일이 선택되지 않았습니다.")},removeImage(e){this.uploadedImages.splice(e,1)},submitReview(){if(!this.reviewContent||this.rating<=0)return void alert("리뷰 내용을 입력하고 별점을 선택하세요.");if(!this.uploadedImages||!Array.isArray(this.uploadedImages))return alert("이미지 데이터가 올바르지 않습니다."),void console.error("uploadedImages is not an array:",this.uploadedImages);const e=new FormData;e.append("content",this.reviewContent),e.append("rating",this.rating),this.uploadedImages.forEach(((t,a)=>{t.file?e.append("images",t.file):console.warn(`유효하지 않은 이미지 데이터 (index: ${a}):`,t)})),console.log("리뷰 제출 데이터:",{content:this.reviewContent,rating:this.rating,images:this.uploadedImages}),this.$emit("submit",{content:this.reviewContent,rating:this.rating,images:this.uploadedImages})}},watch:{initialData:{immediate:!0,handler(e){e&&(this.reviewContent=e.content||"",this.rating=e.rating||0,this.uploadedImages=e.imageUrl?e.imageUrl.map((e=>({file:null,url:e}))):[])}}}};const Ft=(0,u.A)(Vt,[["render",Nt],["__scopeId","data-v-f52a73fe"]]);var Qt=Ft,Ht={props:{userName:{type:String,required:!0},email:{type:String,required:!0},phone:{type:String,required:!0},reviews:Array,loggedInUserId:Number},components:{ReviewModal:Qt},data(){return{isModalOpen:!1,isEditMode:!1,selectedReviewData:null,lightboxImage:null}},methods:{openEditModal(e){this.isModalOpen=!0,this.isEditMode=!0,this.selectedReviewData={...e}},closeModal(){this.isModalOpen=!1,this.isEditMode=!1,this.selectedReviewData=null},async handleReviewSubmit(e){try{const t=sessionStorage.getItem("token");this.isEditMode&&this.selectedReviewData?(await(0,qe.Gm)(this.selectedReviewData.reviewId,e,t),alert("리뷰가 수정되었습니다.")):alert("새로운 리뷰가 작성되었습니다."),this.closeModal(),this.$emit("update")}catch(t){console.error("리뷰 처리 중 오류 발생:",t),alert("리뷰 처리 중 오류가 발생했습니다.")}},async confirmDelete(e){if(confirm("정말로 이 리뷰를 삭제하시겠습니까?"))try{const t=sessionStorage.getItem("token");await(0,qe.Wr)(e,t),alert("리뷰가 삭제되었습니다."),this.$emit("update")}catch(t){console.error("리뷰 삭제 중 오류 발생:",t),alert("리뷰 삭제 중 오류가 발생했습니다.")}},openLightbox(e){this.lightboxImage=e},closeLightbox(){this.lightboxImage=null},goToHotel(e){this.$router.push(`/hotel-details/${e}`)}}};const xt=(0,u.A)(Ht,[["render",Rt],["__scopeId","data-v-22ab6005"]]);var Ot=xt;const qt={class:"reservation-container"},Kt={class:"reservation-list"},Bt={key:0},Jt={key:1},Wt={class:"reservation-info"},jt=["onClick"],zt={key:2},Gt={class:"past-reservation-list"},Yt={key:0},Zt={class:"reservation-info"},ea=["onClick"],ta={key:1};function aa(e,t,a,o,n,i){const r=(0,s.g2)("ReviewModal");return(0,s.uX)(),(0,s.CE)("div",qt,[t[2]||(t[2]=(0,s.Lk)("h2",null,"현재 예약",-1)),(0,s.Lk)("div",Kt,[o.loading||0!==o.visibleUpcomingReservations.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Bt," 예약 내역이 없습니다. ")),o.loading?((0,s.uX)(),(0,s.CE)("div",Jt,"예약 목록을 불러오는 중입니다...")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.visibleUpcomingReservations,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"reservation"},[(0,s.Lk)("div",Wt,[(0,s.Lk)("p",null,"호텔 이름: "+(0,p.v_)(t.hotelName),1),(0,s.Lk)("p",null,"객실 이름: "+(0,p.v_)(t.roomName),1),(0,s.Lk)("p",null,"체크인: "+(0,p.v_)(t.checkIn),1),(0,s.Lk)("p",null,"체크아웃: "+(0,p.v_)(t.checkOut),1),(0,s.Lk)("p",null,"투숙 인원: "+(0,p.v_)(t.guestNum),1),(0,s.Lk)("p",null,"요청 사항: "+(0,p.v_)(t.request),1),(0,s.Lk)("p",null,"예약 상태: "+(0,p.v_)(t.status),1),o.canCancel(t.checkIn)?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>e.cancelReservation(t),class:"cancel-button"}," 결제 취소 ",8,jt)):(0,s.Q3)("",!0)])])))),128)),e.upcomingReservations>o.visibleUpcomingReservations.length?((0,s.uX)(),(0,s.CE)("div",zt,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.loadMoreUpcomingReservations&&e.loadMoreUpcomingReservations(...t))},"더 보기")])):(0,s.Q3)("",!0)]),t[3]||(t[3]=(0,s.Lk)("h2",null,"예약 기록",-1)),(0,s.Lk)("div",Gt,[o.loading||0!==o.visiblePastReservations.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Yt," 지난 예약 내역이 없습니다. ")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.visiblePastReservations,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"reservation"},[(0,s.Lk)("div",Zt,[(0,s.Lk)("p",null,"호텔 이름: "+(0,p.v_)(e.hotelName),1),(0,s.Lk)("p",null,"객실 이름: "+(0,p.v_)(e.roomName),1),(0,s.Lk)("p",null,"체크인: "+(0,p.v_)(e.checkIn),1),(0,s.Lk)("p",null,"체크아웃: "+(0,p.v_)(e.checkOut),1),(0,s.Lk)("p",null,"투숙 인원: "+(0,p.v_)(e.guestNum),1),(0,s.Lk)("p",null,"요청 사항: "+(0,p.v_)(e.request),1),(0,s.Lk)("p",null,"예약 상태: "+(0,p.v_)(e.status),1),o.canWriteReview(e.checkOut)&&!o.hasReview(e.reservationId)?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>o.openReviewModal(e.reservationId)}," 리뷰 작성 ",8,ea)):(0,s.Q3)("",!0)])])))),128)),e.pastReservations>o.visiblePastReservations.length?((0,s.uX)(),(0,s.CE)("div",ta,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.loadMorePastReservations&&e.loadMorePastReservations(...t))},"더 보기")])):(0,s.Q3)("",!0)]),o.state.isModalOpen?((0,s.uX)(),(0,s.Wv)(r,{key:0,reservationId:o.state.selectedReservationId,onSubmit:o.handleReviewSubmit,onClose:o.closeModal},null,8,["reservationId","onSubmit","onClose"])):(0,s.Q3)("",!0)])}var oa=a(1576),sa=a.n(oa);const na=(0,S.nY)("reservations",{state:()=>({reservations:[],upcomingReservations:[],pastReservations:[],visibleUpcomingReservations:[],visiblePastReservations:[],loading:!1,pageUpcoming:1,pagePast:1,itemsPerPageUpcoming:5,itemsPerPagePast:10}),actions:{async fetchReservations(){try{this.loading=!0;const e=sessionStorage.getItem("token");if(!e)return alert("로그인이 필요합니다."),void(this.loading=!1);console.log("사용자 토큰:",e);const t=await(0,qe.T2)(e);console.log("예약 목록 응답:",t.data),this.reservations=t.data.filter((e=>"결제 취소"!==e.paymentStatus)),this.reservations=this.reservations.sort(((e,t)=>new Date(t.checkIn)-new Date(e.checkIn)));const a=sa()();this.upcomingReservations=this.reservations.filter((e=>sa()(e.checkIn).isAfter(a))),this.pastReservations=this.reservations.filter((e=>sa()(e.checkIn).isBefore(a))),this.pageUpcoming=1,this.pagePast=1,this.visibleUpcomingReservations=this.upcomingReservations.slice(0,this.itemsPerPageUpcoming),this.visiblePastReservations=this.pastReservations.slice(0,this.itemsPerPagePast),this.loading=!1}catch(e){console.error("예약 목록 불러오기 오류:",e),this.loading=!1,alert("예약 목록을 불러오는 중 오류가 발생했습니다.")}},loadMoreUpcomingReservations(){const e=this.pageUpcoming*this.itemsPerPageUpcoming,t=e+this.itemsPerPageUpcoming,a=this.upcomingReservations.slice(e,t);this.visibleUpcomingReservations=[...this.visibleUpcomingReservations,...a],this.pageUpcoming+=1},loadMorePastReservations(){const e=this.pagePast*this.itemsPerPagePast,t=e+this.itemsPerPagePast,a=this.pastReservations.slice(e,t);this.visiblePastReservations=[...this.visiblePastReservations,...a],this.pagePast+=1}}});var ia={components:{ReviewModal:Qt},props:{reviews:{type:Array,required:!0}},setup(e){const t=na(),a=(0,L.Kh)({isModalOpen:!1,selectedReservationId:null});(0,s.sV)((()=>{t.fetchReservations()}));const o=(0,s.EW)((()=>t.visibleUpcomingReservations||[])),n=(0,s.EW)((()=>t.visiblePastReservations||[])),i=(0,s.EW)((()=>t.loading)),r=e=>{const t=sa()(),a=sa()(e);return a.diff(t,"day")>=2},l=e=>{const t=sa()(),a=sa()(e),o=t.diff(a,"day");return o>=0&&o<=7},c=t=>e.reviews.some((e=>e.reservationId===t)),u=e=>{console.log("openReviewModal called with reservationId:",e),e?(a.isModalOpen=!0,a.selectedReservationId=e):alert("예약 정보를 불러오지 못했습니다. 다시 시도해주세요.")},d=async e=>{try{if(!e)return alert("리뷰 데이터가 전달되지 않았습니다."),void console.error("reviewData is undefined:",e);console.log("받은 reviewData:",e);const{content:o,rating:s,images:n}=e;if(!o||!s)return void alert("리뷰 내용과 별점은 필수입니다.");if(!a.selectedReservationId)return void alert("예약 정보가 누락되었습니다. 다시 시도해주세요.");const i=sessionStorage.getItem("token");if(!i)return void alert("로그인이 필요합니다.");const r=new FormData;r.append("content",o),r.append("rating",s),r.append("reservationId",a.selectedReservationId),Array.isArray(n)&&n.length>0?n.forEach((e=>{e.file?r.append("images",e.file):console.warn("유효하지 않은 이미지 데이터:",e)})):console.log("이미지가 추가되지 않았습니다."),console.log("FormData entries before sending to server:");for(let[e,t]of r.entries())console.log(`${e}: ${t}`);await(0,qe.bx)(r,i),alert("리뷰가 작성되었습니다."),h(),t.fetchReservations()}catch(o){console.error("리뷰 작성 중 오류 발생:",o),alert("리뷰 작성 중 오류가 발생했습니다.")}},h=()=>{a.isModalOpen=!1,a.selectedReservationId=null};return{visibleUpcomingReservations:o,visiblePastReservations:n,loading:i,canCancel:r,canWriteReview:l,hasReview:c,openReviewModal:u,handleReviewSubmit:d,closeModal:h,state:a}}};const ra=(0,u.A)(ia,[["render",aa],["__scopeId","data-v-0c7175aa"]]);var la=ra;const ca={class:"user-edit-container"},ua={class:"form-group"},da={class:"form-group"},ha={class:"form-group"},pa={class:"form-group"},ma={key:0,class:"error-text"},va=["disabled"],ga={class:"form-group"},ka={class:"form-group"},fa=["disabled"],ya={key:0,class:"form-group"},wa=["disabled"];function La(e,t,a,n,i,r){return(0,s.uX)(),(0,s.CE)("div",ca,[t[18]||(t[18]=(0,s.Lk)("h2",null,"회원 정보 수정",-1)),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,o.D$)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"]))},[(0,s.Lk)("div",ua,[t[11]||(t[11]=(0,s.Lk)("label",{for:"userName"},"이름",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"userName","onUpdate:modelValue":t[0]||(t[0]=e=>n.userName=e),placeholder:"이름을 입력하세요"},null,512),[[o.Jo,n.userName]])]),(0,s.Lk)("div",da,[t[12]||(t[12]=(0,s.Lk)("label",{for:"email"},"이메일",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"이메일을 입력하세요",disabled:""},null,512),[[o.Jo,n.email]]),t[13]||(t[13]=(0,s.Lk)("p",{class:"info-text"},"이메일은 수정할 수 없습니다.",-1))]),(0,s.Lk)("div",ha,[t[14]||(t[14]=(0,s.Lk)("label",{for:"phone"},"전화번호",-1)),(0,s.bo)((0,s.Lk)("input",{type:"tel",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>n.phone=e),placeholder:"전화번호를 입력하세요"},null,512),[[o.Jo,n.phone]])]),(0,s.Lk)("div",pa,[t[15]||(t[15]=(0,s.Lk)("label",{for:"currentPassword"},"현재 비밀번호 확인",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[3]||(t[3]=e=>i.currentPassword=e),onInput:t[4]||(t[4]=(...e)=>r.checkPassword&&r.checkPassword(...e)),placeholder:"현재 비밀번호를 입력하세요"},null,544),[[o.Jo,i.currentPassword]]),!i.isPasswordValid&&i.currentPassword?((0,s.uX)(),(0,s.CE)("p",ma," 비밀번호가 올바르지 않습니다. ")):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"submit",class:"submit-button",disabled:!i.isPasswordValid}," 수정 완료 ",8,va)],32),t[19]||(t[19]=(0,s.Lk)("hr",null,null,-1)),t[20]||(t[20]=(0,s.Lk)("h2",null,"비밀번호 변경",-1)),(0,s.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>r.sendVerificationCode&&r.sendVerificationCode(...e)),["prevent"]))},[(0,s.Lk)("div",ga,[t[16]||(t[16]=(0,s.Lk)("label",{for:"newPassword"},"새 비밀번호",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[6]||(t[6]=e=>i.newPassword=e),placeholder:"새 비밀번호를 입력하세요"},null,512),[[o.Jo,i.newPassword]])]),(0,s.Lk)("div",ka,[t[17]||(t[17]=(0,s.Lk)("label",{for:"passwordConfirmation"},"비밀번호 확인",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"passwordConfirmation","onUpdate:modelValue":t[7]||(t[7]=e=>i.passwordConfirmation=e),placeholder:"비밀번호를 다시 입력하세요"},null,512),[[o.Jo,i.passwordConfirmation]])]),(0,s.Lk)("button",{type:"submit",class:"send-email-button",disabled:i.newPassword!==i.passwordConfirmation}," 이메일 인증번호 전송 ",8,fa)],32),i.isEmailSent?((0,s.uX)(),(0,s.CE)("div",ya,[(0,s.Lk)("button",{type:"button",class:"submit-button",onClick:t[9]||(t[9]=(...e)=>r.changePassword&&r.changePassword(...e)),disabled:!i.isEmailSent}," 비밀번호 변경 ",8,wa)])):(0,s.Q3)("",!0),t[21]||(t[21]=(0,s.Lk)("hr",null,null,-1)),t[22]||(t[22]=(0,s.Lk)("h2",null,"계정 탈퇴",-1)),(0,s.Lk)("button",{class:"delete-account-button",onClick:t[10]||(t[10]=(...e)=>r.confirmDeactivateAccount&&r.confirmDeactivateAccount(...e))}," 계정 탈퇴하기 ")])}var ba={name:"UserEditPage",setup(){const e=(0,w.n)(),t=JSON.parse(localStorage.getItem("userInfo"))||{};return{userName:t.userName||"",email:t.email||"",phone:t.phone||"",authStore:e}},data(){return{currentPassword:"",isPasswordValid:!1,newPassword:"",passwordConfirmation:"",isEmailSent:!1,verificationCode:""}},methods:{async checkPassword(){try{const e=await this.authStore.verifyPassword(this.currentPassword);this.isPasswordValid=200===e.status}catch(e){this.isPasswordValid=!1,console.error("비밀번호 확인 오류:",e)}},async submitForm(){if(this.isPasswordValid)try{await this.authStore.updateUserInfo({userName:this.userName,phone:this.phone}),alert("회원 정보가 성공적으로 수정되었습니다.")}catch(e){console.error("회원 정보 수정 오류:",e),alert("회원 정보 수정 중 오류가 발생했습니다. 다시 시도해 주세요.")}},async sendVerificationCode(){if(this.newPassword===this.passwordConfirmation)try{await this.authStore.sendVerificationEmail(this.email,"editPassword"),this.isEmailSent=!0,alert("이메일로 인증번호가 발송되었습니다.")}catch(e){console.error("인증 이메일 발송 오류:",e),alert("인증 이메일 발송 중 오류가 발생했습니다. 다시 시도해 주세요.")}else alert("새 비밀번호와 확인 비밀번호가 일치하지 않습니다.")},async changePassword(){try{this.isEmailSent?(await this.authStore.changePassword(this.newPassword),alert("비밀번호가 성공적으로 변경되었습니다.")):alert("인증번호가 필요합니다.")}catch(e){console.error("비밀번호 변경 오류:",e),alert("비밀번호 변경 중 오류가 발생했습니다. 다시 시도해 주세요.")}},confirmDeactivateAccount(){const e=confirm("정말로 계정을 탈퇴하시겠습니까? 탈퇴 시 모든 데이터가 삭제됩니다.");e&&this.deactivateAccount()},async deactivateAccount(){try{await this.authStore.deactivateUser(),alert("계정이 성공적으로 탈퇴되었습니다."),this.authStore.logout(),window.location.href="/"}catch(e){console.error("계정 탈퇴 오류:",e),alert("계정 탈퇴 중 오류가 발생했습니다. 다시 시도해 주세요.")}}}};const Ca=(0,u.A)(ba,[["render",La],["__scopeId","data-v-49547d10"]]);var Ia=Ca;const Ea={class:"menu-container"},Ra={class:"main-content"},_a={key:0},Sa={key:1},Pa={key:2},Aa={key:3};function Xa(e,t,a,n,i,r){const l=(0,s.g2)("SidebarLayout");return(0,s.uX)(),(0,s.Wv)(l,{title:"호텔 관리자"},{menu:(0,s.k6)((()=>[(0,s.Lk)("div",Ea,[(0,s.Lk)("a",{href:"#",class:(0,p.C4)({active:"Dashboard"===i.currentView}),onClick:t[0]||(t[0]=(0,o.D$)((e=>i.currentView="Dashboard"),["prevent"]))},t[4]||(t[4]=[(0,s.Lk)("span",{class:"icon"},"📋",-1),(0,s.eW)("대시보드 ")]),2),(0,s.Lk)("a",{href:"#",class:(0,p.C4)({active:"RoomManagement"===i.currentView}),onClick:t[1]||(t[1]=(0,o.D$)((e=>i.currentView="RoomManagement"),["prevent"]))},t[5]||(t[5]=[(0,s.Lk)("span",{class:"icon"},"🛏️",-1),(0,s.eW)("객실 관리 ")]),2),(0,s.Lk)("a",{href:"#",class:(0,p.C4)({active:"ReservationManagement"===i.currentView}),onClick:t[2]||(t[2]=(0,o.D$)((e=>i.currentView="ReservationManagement"),["prevent"]))},t[6]||(t[6]=[(0,s.Lk)("span",{class:"icon"},"📅",-1),(0,s.eW)("예약 관리 ")]),2),(0,s.Lk)("a",{href:"#",class:(0,p.C4)({active:"Analytics"===i.currentView}),onClick:t[3]||(t[3]=(0,o.D$)((e=>i.currentView="Analytics"),["prevent"]))},t[7]||(t[7]=[(0,s.Lk)("span",{class:"icon"},"📊",-1),(0,s.eW)("매출 분석 ")]),2)])])),default:(0,s.k6)((()=>[(0,s.Lk)("div",Ra,["Dashboard"===i.currentView?((0,s.uX)(),(0,s.CE)("div",_a,t[8]||(t[8]=[(0,s.Lk)("h2",null,"대시보드",-1),(0,s.Lk)("p",null,"호텔의 전체 상태를 한눈에 확인하세요.",-1),(0,s.Lk)("ul",{class:"dashboard-summary"},[(0,s.Lk)("li",{class:"dashboard-item"},[(0,s.Lk)("h3",null,"🛏️ 객실 관리"),(0,s.Lk)("p",null,"현재 관리 중인 객실 수: 50개"),(0,s.Lk)("p",null,"점검 중인 객실: 3개")]),(0,s.Lk)("li",{class:"dashboard-item"},[(0,s.Lk)("h3",null,"📅 예약 관리"),(0,s.Lk)("p",null,"오늘 체크인 예정: 10건"),(0,s.Lk)("p",null,"예약 취소 요청: 2건")]),(0,s.Lk)("li",{class:"dashboard-item"},[(0,s.Lk)("h3",null,"📊 매출 분석"),(0,s.Lk)("p",null,"이번 달 매출: 1,200,000원"),(0,s.Lk)("p",null,"예약률: 75%")])],-1)]))):(0,s.Q3)("",!0),"RoomManagement"===i.currentView?((0,s.uX)(),(0,s.CE)("div",Sa,t[9]||(t[9]=[(0,s.Lk)("h2",null,"객실 관리",-1),(0,s.Lk)("p",null,"객실 정보를 관리합니다.",-1)]))):(0,s.Q3)("",!0),"ReservationManagement"===i.currentView?((0,s.uX)(),(0,s.CE)("div",Pa,t[10]||(t[10]=[(0,s.Lk)("h2",null,"예약 관리",-1),(0,s.Lk)("p",null,"예약 상태를 확인하고 수정할 수 있습니다.",-1)]))):(0,s.Q3)("",!0),"Analytics"===i.currentView?((0,s.uX)(),(0,s.CE)("div",Aa,t[11]||(t[11]=[(0,s.Lk)("h2",null,"호텔 분석",-1),(0,s.Lk)("p",null,"호텔 관련 데이터를 분석합니다.",-1)]))):(0,s.Q3)("",!0)])])),_:1})}var Ua=a(3083),Ma={name:"HotelAdminPage",components:{SidebarLayout:Ua.A},data(){return{currentView:"Dashboard"}}};const Ta=(0,u.A)(Ma,[["render",Xa],["__scopeId","data-v-0f471488"]]);var $a=Ta;const Da={class:"search-page"},Na={class:"search-container"},Va={class:"search-bar"},Fa={key:0,class:"autocomplete-list"},Qa=["onClick"],Ha={class:"hotel-name"},xa={class:"hotel-address"},Oa={key:0,class:"no-results"},qa={class:"date-picker"},Ka=["min"],Ba=["min"],Ja={key:1,class:"warning-message"},Wa={class:"occupancy-selector"},ja=["value"],za={class:"map-button-container"},Ga={class:"results"},Ya={key:0},Za=["onClick"],eo=["src"],to={class:"hotel-info"};function ao(e,t,a,n,i,r){return(0,s.uX)(),(0,s.CE)("div",Da,[(0,s.Lk)("div",Na,[(0,s.Lk)("div",Va,[t[7]||(t[7]=(0,s.Lk)("span",{class:"icon"},"🔍",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",placeholder:"지역, 숙소명 키워드로 찾아보세요",onKeyup:t[1]||(t[1]=(0,o.jR)(((...e)=>r.performSearch&&r.performSearch(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]])]),i.autocompleteResults.length>0?((0,s.uX)(),(0,s.CE)("ul",Fa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.autocompleteResults,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.hotelId,onClick:t=>r.selectAutocompleteResult(e),class:"autocomplete-item"},[(0,s.Lk)("span",Ha,(0,p.v_)(e.name),1),(0,s.Lk)("span",xa,(0,p.v_)(e.address||"주소 정보 없음"),1)],8,Qa)))),128)),i.noResults?((0,s.uX)(),(0,s.CE)("li",Oa,"연관된 검색어가 없습니다.")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",qa,[t[8]||(t[8]=(0,s.Lk)("span",{class:"icon"},"📅",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>i.checkInDate=e),min:i.today,placeholder:"체크인",onChange:t[3]||(t[3]=(...e)=>r.validateCheckInDate&&r.validateCheckInDate(...e))},null,40,Ka),[[o.Jo,i.checkInDate]]),t[9]||(t[9]=(0,s.Lk)("span",null,"~",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>i.checkOutDate=e),min:i.checkInDate||i.today,placeholder:"체크아웃"},null,8,Ba),[[o.Jo,i.checkOutDate]])]),i.dateWarning?((0,s.uX)(),(0,s.CE)("div",Ja,(0,p.v_)(i.dateWarning),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Wa,[t[11]||(t[11]=(0,s.Lk)("span",{class:"icon"},"👤",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.totalGuests=e)},[t[10]||(t[10]=(0,s.Lk)("option",{value:"0"},"인원무관",-1)),((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(20,(e=>(0,s.Lk)("option",{key:e,value:e},(0,p.v_)(e)+"명",9,ja))),64))],512),[[o.u1,i.totalGuests]])])]),(0,s.Lk)("div",za,[(0,s.Lk)("button",{class:"map-button",onClick:t[6]||(t[6]=(...e)=>r.goToMapView&&r.goToMapView(...e))},"지도 보기")]),(0,s.Lk)("div",Ga,[0===i.hotels.length?((0,s.uX)(),(0,s.CE)("div",Ya,"검색 결과가 없습니다.")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.hotels,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.hotelId,class:"hotel-item",onClick:t=>r.goToHotelDetail(e.hotelId)},[(0,s.Lk)("img",{src:e.imageUrl||i.defaultImage,alt:"Hotel Image",class:"hotel-image"},null,8,eo),(0,s.Lk)("div",to,[(0,s.Lk)("h3",null,(0,p.v_)(e.name),1),(0,s.Lk)("p",null,(0,p.v_)(e.address||"주소 정보 없음"),1),(0,s.Lk)("p",null,"평점: "+(0,p.v_)(e.rating||"정보 없음"),1)])],8,Za)))),128))])])}var oo={name:"SearchPage",data(){return{searchQuery:this.$route.query.query||"",hotels:[],checkInDate:"",checkOutDate:"",totalGuests:0,today:(new Date).toISOString().split("T")[0],defaultImage:"https://png.pngtree.com/png-vector/20240613/ourlarge/pngtree-modern-hotel-icon-with-palm-trees-black-isolated-on-white-background-vector-png-image_7010310.png",autocompleteResults:[],noResults:!1,dateWarning:""}},created(){this.searchQuery&&this.performSearch()},methods:{async performSearch(){const e={query:this.searchQuery||void 0,checkInDate:this.checkInDate||void 0,checkOutDate:this.checkOutDate||void 0,guests:this.totalGuests||1};try{const t=await ee.A.get("/api/hotels/search-by-date-and-guest",{params:e});this.hotels=t.data,this.$router.replace({query:{...this.$route.query,query:this.searchQuery}}),this.autocompleteResults=[],this.noResults=!1}catch(t){console.error("검색 결과를 가져오는 중 오류 발생:",t),this.hotels=[]}},async fetchAutocompleteResults(){if(this.searchQuery.length>0){const t=this.searchQuery.replace(/\s+/g,"");try{const e=await ee.A.get(`/api/hotels/search?query=${t}`);this.autocompleteResults=e.data,this.noResults=0===this.autocompleteResults.length}catch(e){console.error("자동 완성 결과를 가져오는 중 오류 발생:",e),this.autocompleteResults=[],this.noResults=!0}}else this.autocompleteResults=[],this.noResults=!1},validateCheckInDate(){this.checkInDate<this.today?(this.dateWarning="체크인 날짜는 오늘 이후로 선택해주세요.",this.checkInDate=""):this.dateWarning=""},updateCheckoutMinDate(){this.checkInDate&&this.checkInDate<this.today&&(this.checkInDate=this.today)},goToHotelDetail(e){this.$router.push(`/hotel-details/${e}`)},goToMapView(){this.$router.push({path:"/map-view",query:{hotels:JSON.stringify(this.hotels),query:this.searchQuery}})},selectAutocompleteResult(e){this.searchQuery=e.name,this.performSearch()}},watch:{searchQuery(){this.fetchAutocompleteResults()}}};const so=(0,u.A)(oo,[["render",ao],["__scopeId","data-v-673888a2"]]);var no=so;const io={class:"map-page"};function ro(e,t,a,o,n,i){return(0,s.uX)(),(0,s.CE)("div",io,[t[1]||(t[1]=(0,s.Lk)("h2",null,"지도",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.goToSearchPage&&i.goToSearchPage(...e)),class:"back-button"},"검색 페이지로 돌아가기"),t[2]||(t[2]=(0,s.Lk)("div",{id:"map"},null,-1))])}var lo={name:"MapPage",props:{hotels:{type:Array,required:!1,default:()=>[]},location:{type:String,required:!1}},data(){return{mapHotels:[]}},async mounted(){this.hotels.length>0?this.mapHotels=this.hotels:await this.fetchHotels(),this.loadKakaoMap()},beforeUnmount(){const e=document.querySelector("script[src*='//dapi.kakao.com/v2/maps/sdk.js']");e&&(e.remove(),delete window.kakao)},methods:{async fetchHotels(){try{const e=await ee.A.get(`/api/hotels/search?location=${this.location||""}`);console.log("API response:",e.data),this.mapHotels=Array.isArray(e.data)?e.data:[],console.log("mapHotels:",this.mapHotels)}catch(e){console.error("호텔 목록을 가져오는 중 오류 발생:",e),this.mapHotels=[]}},loadKakaoMap(){if("undefined"===typeof kakao){const e=document.createElement("script"),t="d685c63d7eb74d08883cdb9e13b5fb6c";e.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${t}&autoload=false`,e.onload=this.initMap,document.head.appendChild(e)}else this.initMap()},initMap(){kakao.maps.load((()=>{const e=document.getElementById("map"),t={center:new kakao.maps.LatLng(37.5665,126.978),level:5},a=new kakao.maps.Map(e,t),o=new kakao.maps.LatLngBounds,s="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";Array.isArray(this.mapHotels)&&this.mapHotels.length>0?(this.mapHotels.forEach((e=>{if(e.mapY&&e.mapX){const t=new kakao.maps.LatLng(e.mapY,e.mapX),n=new kakao.maps.Size(24,35),i=new kakao.maps.MarkerImage(s,n),r=new kakao.maps.Marker({map:a,position:t,title:e.name,image:i});o.extend(t);const l=`\n                  <div style="\n                      width: 200px; \n                      padding: 10px; \n                      font-family: Arial, sans-serif; \n                      color: #333;\n                      border-radius: 8px;\n                  ">\n                      <img src="${e.imageUrl}" \n                          alt="${e.name}" \n                          style="width: 100%; height: auto; border-radius: 8px; margin-bottom: 8px;" />\n                      <strong style="display: block; font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px;">\n                      ${e.name}\n                      </strong>\n                      <span style="font-size: 14px; color: #666; line-height: 1.5;">\n                      ${e.address}\n                      </span>\n                  </div>\n                  `,c=new kakao.maps.InfoWindow({content:l,removable:!1});kakao.maps.event.addListener(r,"mouseover",(()=>{c.open(a,r)})),kakao.maps.event.addListener(r,"mouseout",(()=>{c.close()})),kakao.maps.event.addListener(r,"click",(()=>{this.$router.push(`/hotel-details/${e.hotelId}`)}))}})),a.setBounds(o)):console.warn("mapHotels 배열이 비어 있습니다.")}))},goToSearchPage(){this.$router.push({path:"/search-results",query:{query:this.$route.query.query}})}}};const co=(0,u.A)(lo,[["render",ro],["__scopeId","data-v-728f9e6d"]]);var uo=co;const ho=[{path:"/",component:ne},{path:"/my_page",component:ct,children:[{path:"",component:Ot},{path:"reservations",component:la},{path:"edit-info",component:Ia}]},{path:"/register",component:ve},{path:"/login",component:Ee},{path:"/hotel-details/:id",component:()=>a.e(316).then(a.bind(a,8316))},{path:"/room-details/:roomId",component:()=>a.e(879).then(a.bind(a,2879)),name:"HotelRoom"},{path:"/oauth2/success",component:Pe},{path:"/find-my-id",component:()=>a.e(594).then(a.bind(a,5594))},{path:"/payment",component:()=>a.e(98).then(a.bind(a,2098)),name:"paymentPage"},{path:"/verify-email",component:Ve},{path:"/admin/hotel",component:$a},{path:"/admin/system",component:()=>a.e(788).then(a.bind(a,9788))},{path:"/reset-password",component:Je},{path:"/search-results",component:no},{path:"/map-view",component:uo,props:e=>({hotels:e.query.hotels?JSON.parse(e.query.hotels):[]})}],po=(0,P.aE)({history:(0,P.LA)(),routes:ho,scrollBehavior(){return{top:0}}});var mo=po,vo=a(1999),go=a(3358);const ko=(0,S.Ey)();(0,o.Ef)(_).component("vue3-star-ratings",go.A).use(vo.Ay,{}).use(ko).use(mo).mount("#app");const fo=(0,w.n)();fo.checkLoginStatus()},6698:function(e,t,a){a.d(t,{n:function(){return n}});var o=a(5234),s=a(412);const n=(0,o.nY)("auth",{state:()=>({currentUser:null,accessToken:null,LoggedIn:!1,emailMessage:"",isEmailAvailable:!1,isVerified:!1,verificationToken:null,userId:null,userName:null,phone:null}),actions:{async signup(e){try{if(!this.verificationToken)throw new Error("이메일 인증 토큰이 없습니다.");const t=await(0,s.E_)(e,this.verificationToken);return t}catch(t){throw console.error(t),t}},async sendVerificationEmail(e,t){try{const a=await(0,s.E7)(e,t);return this.isVerified=!0,this.verificationToken=a.data,localStorage.setItem("verificationToken",a.data),a}catch(a){throw console.error("이메일 인증 메일 발송 실패:",a),this.isVerified=!1,a}},async verifyEmailToken(e){try{const t=await(0,s.vb)(e);return t&&200===t.status&&(this.isVerified=!0,this.verificationToken=e),t}catch(t){throw console.error("이메일 인증 실패:",t),this.isVerified=!1,t}},async checkEmailAvailability(e){try{const t=await(0,s.Ro)(e);this.emailMessage=t.data,this.isEmailAvailable=!0}catch(t){t.response&&409===t.response.status?this.emailMessage=t.response.data:this.emailMessage="이메일 중복 확인 중 오류가 발생했습니다.",this.isEmailAvailable=!1}},async login(e){try{const t=await(0,s.Lx)(e);this.currentUser=t.data.email,this.LoggedIn=!0,this.setAccessToken(t.data.token),this.phone=t.data.phone,this.userName=t.data.userName,this.userId=t.data.userId,console.log("로그인 성공:",t.data),localStorage.setItem("userInfo",JSON.stringify({userName:t.data.userName,userId:t.data.userId,email:t.data.email,phone:t.data.phone})),sessionStorage.setItem("token",t.data.token)}catch(t){throw console.error("로그인 실패:",t),new Error("로그인 실패")}},setAccessToken(e){this.accessToken=e,this.LoggedIn=!!e,sessionStorage.setItem("token",e)},logout(){this.currentUser=null,this.accessToken=null,this.LoggedIn=!1,this.userId=null,this.userName=null,this.phone=null,sessionStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("verificationToken"),localStorage.removeItem("verifiedEmail"),console.log("로그아웃 성공")},checkLoginStatus(){const e=sessionStorage.getItem("token"),t=localStorage.getItem("userInfo");if(e){if(this.accessToken=e,this.LoggedIn=!0,t){const e=JSON.parse(t);this.userName=e.userName,this.userId=e.userId,this.currentUser=e.email,this.phone=e.phone}}else this.LoggedIn=!1},async updateUserInfo(e){try{const t=await(0,s.J)(e,this.accessToken);return 200===t.status&&(localStorage.setItem("userInfo",JSON.stringify({...JSON.parse(localStorage.getItem("userInfo")),...e})),this.userName=e.userName,this.phone=e.phone,console.log("회원 정보 수정 성공:",t.data)),t}catch(t){throw console.error("회원 정보 수정 오류:",t),t}},async verifyPassword(e){try{const t=await(0,s.PY)(e,this.accessToken);return t}catch(t){throw console.error("비밀번호 확인 오류:",t),t}},async changePassword(e){try{const t=this.currentUser,a=localStorage.getItem("verificationToken"),o=await(0,s.UR)(t,e,a);return o}catch(t){throw console.error("비밀번호 변경 오류:",t),t}},async deactivateUser(){try{const e=await(0,s.od)(this.accessToken);return e}catch(e){throw console.error("계정 탈퇴 오류:",e),e}},async getUserInfo(){try{const e=this.accessToken;if(!e)throw new Error("로그인이 필요합니다.");const t=await(0,s.ug)(e);return t}catch(e){throw console.error("사용자 정보 가져오기 오류:",e),e}}}})},3083:function(e,t,a){a.d(t,{A:function(){return h}});var o=a(6768),s=a(4232);const n={class:"layout-container"},i={key:0,class:"sidebar"},r={class:"main-content"};function l(e,t,a,l,c,u){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",n,[a.showSidebar?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("h2",null,(0,s.v_)(a.title),1),(0,o.RG)(e.$slots,"menu",{},void 0,!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",r,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])])])}var c={props:{showSidebar:{type:Boolean,default:!0},title:{type:String,default:"관리자"}}},u=a(1241);const d=(0,u.A)(c,[["render",l],["__scopeId","data-v-5d45674b"]]);var h=d}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,n){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],n=e[u][2];for(var r=!0,l=0;l<o.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(r=!1,n<i&&(i=n));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{98:"d1cc707c",316:"99296bd6",594:"38d91e30",788:"b3abef03",879:"2030ba12"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{98:"7a7424e6",316:"9dc7d5c7",594:"d12f0966",788:"ccaca88b",879:"abdde2c7"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";a.l=function(o,s,n,i){if(e[o])e[o].push(s);else{var r,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+n){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+n),r.src=o),e[o]=[s];var h=function(t,a){r.onerror=r.onload=null,clearTimeout(p);var s=e[o];if(delete e[o],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,s,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",a.nc&&(i.nonce=a.nc);var r=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var o=a&&a.type,r=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+r+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,i.parentNode&&i.parentNode.removeChild(i),n(l)}};return i.onerror=i.onload=r,i.href=t,o?o.parentNode.insertBefore(i,o.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=a[o],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){s=i[o],n=s.getAttribute("data-href");if(n===e||n===t)return s}},o=function(o){return new Promise((function(s,n){var i=a.miniCssF(o),r=a.p+i;if(t(i,r))return s();e(o,r,null,s,n)}))},s={524:0};a.f.miniCss=function(e,t){var a={98:1,316:1,594:1,788:1,879:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=o(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,o){var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var n=new Promise((function(a,o){s=e[t]=[a,o]}));o.push(s[2]=n);var i=a.p+a.u(t),r=new Error,l=function(o){if(a.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",r.name="ChunkLoadError",r.type=n,r.request=i,s[1](r)}};a.l(i,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,i=o[0],r=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var u=l(a)}for(t&&t(o);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(6054)}));o=a.O(o)})();
//# sourceMappingURL=app.1b813197.js.map