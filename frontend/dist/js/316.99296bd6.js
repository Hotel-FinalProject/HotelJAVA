"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[316],{8316:function(e,t,o){o.r(t),o.d(t,{default:function(){return ie}});var s=o(6768),a=o(4232),i=o(5130);const r={key:0,class:"details-container"},n={class:"img-container"},l=["src"],c={key:1,class:"no-image-container"},d={class:"hotel-info-card"},h={class:"hotel-top"},v={class:"hotel-name"},k={key:0,class:"favorite-container"},u={key:0,class:"fas fa-heart"},m={key:1,class:"far fa-heart"},p={class:"hotel-info"},g={class:"rating"},L={class:"hotel-info-details"},w={class:"review-container"},C={key:0},f={key:1},y={class:"review-top"},b={class:"review-rating"},I={class:"review-actions"},E={class:"review-date"},R=["onClick"],X=["onClick"],_={class:"reviewer"},F={class:"review-content"},A={key:0,class:"review-images"},M=["src","onClick"],x={key:0,class:"load-more-container"},U={class:"room-list"},$={key:0},H={class:"room-image-container"},T=["src"],D={key:1,class:"no-room-image"},K={class:"room-info"},P={class:"room-name"},O={class:"avg-person"},S={class:"avg-person-text"},N={class:"reservation-info"},Y={class:"check-info"},B=["innerHTML"],Q=["innerHTML"],W={class:"price"},j={class:"reservation-bottom"},V={class:"room-count"},q=["onClick"],z={key:1},G={key:1};function J(e,t,o,J,Z,ee){return Z.hotel?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",n,[Z.hotel.imageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:Z.hotel.imageUrl,alt:"Hotel Image"},null,8,l)):((0,s.uX)(),(0,s.CE)("div",c,t[3]||(t[3]=[(0,s.Lk)("p",{class:"no-image-text"},"ì—…ì²´ì¸¡ì—ì„œ ì œê³µëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤",-1)])))]),(0,s.Lk)("div",d,[(0,s.Lk)("div",h,[(0,s.Lk)("div",null,[(0,s.Lk)("div",v,(0,a.v_)(Z.hotel.name),1)]),Z.isLoggedIn?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",{class:(0,a.C4)(["heart-button",{favorited:Z.isFavorited,unfavorited:!Z.isFavorited}]),onClick:t[0]||(t[0]=(...e)=>ee.toggleFavorite&&ee.toggleFavorite(...e))},[Z.isFavorited?((0,s.uX)(),(0,s.CE)("i",u)):((0,s.uX)(),(0,s.CE)("i",m))],2)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",p,[(0,s.Lk)("span",g,"â­ "+(0,a.v_)(Z.hotel.rating||"0"),1),(0,s.Lk)("span",null,"("+(0,a.v_)(Z.hotel.reviewCount||0)+" ë¦¬ë·°)",1)]),(0,s.Lk)("div",L,[(0,s.Lk)("p",null,[t[4]||(t[4]=(0,s.Lk)("span",{class:"phone-icon"},"ğŸ“",-1)),(0,s.eW)(" ì „í™”ë²ˆí˜¸ : "+(0,a.v_)(Z.hotel.hotelnum||"ì—…ì²´ì¸¡ì—ì„œ ì œê³µëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."),1)]),(0,s.Lk)("p",null,[t[5]||(t[5]=(0,s.Lk)("span",{class:"location-icon"},"ğŸ“",-1)),(0,s.eW)(" "+(0,a.v_)(Z.hotel.address||"ì—…ì²´ì¸¡ì—ì„œ ì œê³µëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.")+" ",1),(0,s.Lk)("button",{class:"copy-button",onClick:t[1]||(t[1]=(...e)=>ee.copyAddressToClipboard&&ee.copyAddressToClipboard(...e))},"ì£¼ì†Œë³µì‚¬")]),t[6]||(t[6]=(0,s.Lk)("div",{id:"map",style:{width:"500px",height:"400px"}},null,-1))])]),(0,s.Lk)("div",w,[t[8]||(t[8]=(0,s.Lk)("h3",null,"ë¦¬ë·°",-1)),Z.hotelReviews&&0===Z.hotelReviews.length?((0,s.uX)(),(0,s.CE)("div",C,t[7]||(t[7]=[(0,s.Lk)("p",null,"ì´ í˜¸í…”ì— ëŒ€í•œ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.",-1)]))):((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(i.F,{name:"fade",tag:"div",class:"review-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Z.visibleReviews,((t,o)=>((0,s.uX)(),(0,s.CE)("div",{key:o,class:"review-grid"},[(0,s.Lk)("div",y,[(0,s.Lk)("div",b,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("span",{key:e,class:(0,a.C4)(["star",{filled:e<=t.rating}])}," â­ ",2))),64))]),(0,s.Lk)("div",I,[(0,s.Lk)("div",E,(0,a.v_)(ee.reviewFormatDate(t.updateDate||t.writeDate)),1),t.userId===e.loggedInUserId?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"edit-button",onClick:o=>e.openEditModal(t)}," ìˆ˜ì •í•˜ê¸° ",8,R)):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"report-button",onClick:e=>ee.reportReviews(t.reviewId,t.userId)}," ì‹ ê³ í•˜ê¸° ",8,X))])]),(0,s.Lk)("div",_,(0,a.v_)(t.userName),1),(0,s.Lk)("div",F,(0,a.v_)(t.content),1),t.imageUrl&&t.imageUrl.length>0?((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.imageUrl,((t,o)=>((0,s.uX)(),(0,s.CE)("img",{src:t,key:o,class:"review-image",onClick:o=>e.openLightbox(t)},null,8,M)))),128))])):(0,s.Q3)("",!0)])))),128))])),_:1}),Z.visibleReviewCount<Z.hotelReviews.length?((0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>ee.expandReviews&&ee.expandReviews(...e)),class:"load-more-btn"}," â• ë” ë³´ê¸° ")])):(0,s.Q3)("",!0)]))]),(0,s.Lk)("div",U,[t[15]||(t[15]=(0,s.Lk)("h3",null,"ê°ì‹¤ ì •ë³´",-1)),Z.hotel.rooms&&Z.hotel.rooms.length>0?((0,s.uX)(),(0,s.CE)("div",$,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Z.hotel.rooms,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.roomId,class:"room-card"},[(0,s.Lk)("div",H,[e.roomImageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:e.roomImageUrl,class:"room-img",alt:"Room Image"},null,8,T)):((0,s.uX)(),(0,s.CE)("div",D,t[9]||(t[9]=[(0,s.Lk)("p",{class:"no-room-image-text"},"ì—…ì²´ì¸¡ì—ì„œ ì œê³µëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤",-1)])))]),(0,s.Lk)("div",K,[(0,s.Lk)("h4",P,(0,a.v_)(e.roomType),1),(0,s.Lk)("div",O,[t[10]||(t[10]=(0,s.Lk)("img",{class:"person-icon",src:"https://yaimg.yanolja.com/stay/static/images/v3/icon_my.png"},null,-1)),(0,s.Lk)("span",S,"ê¸°ì¤€ì¸ì› "+(0,a.v_)(e.roomOccupancy)+"ì¸",1)]),(0,s.Lk)("div",N,[t[13]||(t[13]=(0,s.Lk)("h5",{class:"reservation-text"},"ìˆ™ë°•",-1)),(0,s.Lk)("div",Y,[t[11]||(t[11]=(0,s.eW)(" ì²´í¬ì¸ ")),(0,s.Lk)("span",{innerHTML:ee.formattedCheckIn},null,8,B),t[12]||(t[12]=(0,s.eW)(" ~ ì²´í¬ì•„ì›ƒ ")),(0,s.Lk)("span",{innerHTML:ee.formattedCheckOut},null,8,Q)]),(0,s.Lk)("h2",W,(0,a.v_)(e.roomPrice?`${e.roomPrice.toLocaleString()}ì›`:"ê°€ê²© ì •ë³´ ì—†ìŒ"),1),(0,s.Lk)("div",j,[(0,s.Lk)("div",V,"ë‚¨ì€ ê°ì‹¤ "+(0,a.v_)(e.roomCount)+"ê°œ",1),(0,s.Lk)("button",{onClick:t=>ee.move(e),class:"reservation_btn"},"ì˜ˆì•½ ë° ìƒì„¸ë³´ê¸°",8,q)])])])])))),128))])):((0,s.uX)(),(0,s.CE)("div",z,t[14]||(t[14]=[(0,s.Lk)("div",{class:"room-card"},[(0,s.Lk)("div",{class:"no-room-info-container"},[(0,s.Lk)("p",{class:"no-room-info-text"},"ì—…ì²´ì¸¡ì—ì„œ ì œê³µëœ ê°ì‹¤ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.")])],-1)])))])])):((0,s.uX)(),(0,s.CE)("div",G,t[16]||(t[16]=[(0,s.Lk)("p",null,"í˜¸í…” ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...",-1)])))}o(4114);var Z=o(4373),ee=o(412),te=o(6698),oe={name:"HotelDetails",data(){return{hotel:null,hotelReviews:[],visibleReviews:[],visibleReviewCount:3,isFavorited:!1,isLoggedIn:!1}},mounted(){this.fetchFavoriteStatus()},async created(){const e=(0,te.n)();e.checkLoginStatus(),this.isLoggedIn=e.LoggedIn,this.token=e.accessToken,await this.fetchHotelDetails(),this.hotel&&this.hotel.mapX&&this.hotel.mapY&&this.loadKakaoMap()},beforeUnmount(){const e=document.querySelector("script[src*='//dapi.kakao.com/v2/maps/sdk.js']");e&&(e.remove(),delete window.kakao)},watch:{hotel(e){e&&e.mapX&&e.mapY&&this.loadKakaoMap()}},computed:{formattedCheckIn(){return this.hotel.checkIn?this.hotel.checkIn.replace(/<br\s*\/?>/gi,"<br>"):"ì •ë³´ì—†ìŒ"},formattedCheckOut(){return this.hotel.checkOut?this.hotel.checkOut.replace(/<br\s*\/?>/gi,"<br>"):"ì •ë³´ì—†ìŒ"}},methods:{async fetchHotelDetails(){const e=this.$route.params.id;try{const t=await Z.A.get(`/api/hotels/${e}`);this.hotel=t.data,console.log(this.hotel),await this.fetchHotelReviews(e)}catch(t){console.error("í˜¸í…” ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",t)}},move(e){this.$router.push({params:{roomId:e.roomId},name:"HotelRoom",state:{hotelName:this.hotel.name,roomName:e.roomType,roomPrice:e.roomPrice,checkIn:this.hotel.checkIn,checkOut:this.hotel.checkOut,roomId:e.roomId}})},copyAddressToClipboard(){this.hotel&&this.hotel.address&&navigator.clipboard.writeText(this.hotel.address).then((()=>{alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")})).catch((e=>{console.error("ì£¼ì†Œ ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",e)}))},loadKakaoMap(){const e="d685c63d7eb74d08883cdb9e13b5fb6c";if("undefined"===typeof kakao){const t=document.createElement("script");t.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${e}&autoload=false`,t.onload=this.initMap,document.head.appendChild(t),console.log({NODE_ENV:"production",VUE_APP_API_URL:"http://localhost:8081/",VUE_APP_KAKAO_API_KEY:"d685c63d7eb74d08883cdb9e13b5fb6c",BASE_URL:"/"})}else this.initMap()},initMap(){kakao.maps.load((()=>{const e=document.getElementById("map"),t={center:new kakao.maps.LatLng(this.hotel.mapY||"ì¢Œí‘œâŒ",this.hotel.mapX||"ì¢Œí‘œâŒ"),level:3},o=new kakao.maps.Map(e,t),s=new kakao.maps.LatLng(this.hotel.mapY||"ì¢Œí‘œâŒ",this.hotel.mapX||"ì¢Œí‘œâŒ"),a=new kakao.maps.Marker({position:s});a.setMap(o)}))},async fetchFavoriteStatus(){const e=this.token,t=this.$route.params.id;if(this.isLoggedIn)try{const o=await Z.A.get(`/api/auth/favorites/status/${t}`,{headers:{Authorization:`Bearer ${e}`}});this.isFavorited=o.data}catch(o){console.error("ì°œ ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨",o)}},async toggleFavorite(){const e=this.token,t=this.$route.params.id;if(!this.isLoggedIn)return void alert("ë¡œê·¸ì¸ í›„ ì¦ê²¨ì°¾ê¸°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");const o=this.isFavorited?`/api/auth/favorites/cancel/${t}`:`/api/auth/favorites/${t}`;try{await Z.A.post(o,{},{headers:{Authorization:`Bearer ${e}`}}),this.isFavorited=!this.isFavorited}catch(s){console.error("ì°œ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨",s)}},async fetchHotelReviews(e){try{const t=await(0,ee.TH)(e);this.hotelReviews=t.data,this.visibleReviews=this.hotelReviews.slice(0,this.visibleReviewCount)}catch(t){console.error("í˜¸í…” ë¦¬ë·° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",t)}},reviewFormatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},expandReviews(){const e=this.visibleReviewCount+3;this.visibleReviewCount=e,this.visibleReviews=this.hotelReviews.slice(0,e)},async reportReviews(e,t){const o=(0,te.n)(),s=sessionStorage.getItem("token");if(!this.isLoggedIn)return alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤"),void this.$router.push("/login");if(!e)return alert("ì‹ ê³  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),void console.error("Missing userId or reviewId");console.log("ë¦¬ë·° id : ",e),console.log("ë¦¬ë·° ìœ ì € : ",t);const a={reporterId:o.userId,reportedId:t,reviewId:e};try{const e=await(0,ee.DQ)(a,s);e.data&&(alert("ì‹ ê³ ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log(e.data))}catch(i){alert("ì‹ ê³  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),console.error("Axios request error:",i.response||i.message)}}}},se=o(1241);const ae=(0,se.A)(oe,[["render",J],["__scopeId","data-v-5e04e668"]]);var ie=ae}}]);
//# sourceMappingURL=316.99296bd6.js.map