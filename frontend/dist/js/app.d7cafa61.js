(function(){"use strict";var e={412:function(e,t,a){a.d(t,{Ad:function(){return l},E7:function(){return c},E_:function(){return n},J:function(){return p},KW:function(){return h},Lx:function(){return r},PY:function(){return m},Ro:function(){return i},T2:function(){return g},To:function(){return k},UR:function(){return v},od:function(){return f},ug:function(){return d},vb:function(){return u}});var s=a(4373);const o=s.A.create({baseURL:"http://localhost:8081/api",headers:{"Content-Type":"application/json"}});function n(e,t){return o.post("/users/signup",e,{headers:{verificationToken:`Bearer ${t}`}})}function r(e){return o.post("/users/login",e)}function i(e){return o.get("/users/check-email",{params:{email:e}})}function l(e){return o.post("/users/find-id",{name:e})}function c(e,t){return o.post("/users/send-verification-email",{email:e,mode:t})}function u(e){return o.get("/users/verify-email",{params:{token:e}})}function d(e){return o.get("/auth/users/me",{headers:{Authorization:`Bearer ${e}`}})}const h=(e,t)=>o.post("/users/reset-password",{email:e,token:t});function p(e,t){return o.put("/auth/users/update",e,{headers:{Authorization:`Bearer ${t}`}})}function m(e,t){return o.post("/auth/users/verify-password",{password:e},{headers:{Authorization:`Bearer ${t}`}})}function v(e,t,a){return o.post("/auth/users/reset-password",{email:e,newPassword:t,token:a})}function f(e){return o.delete("/auth/users/delete",{headers:{Authorization:`Bearer ${e}`}})}function g(e){return o.get("/auth/reservationInfo",{headers:{Authorization:`Bearer ${e}`}})}function k(e,t,a){return o.post(`/auth/paymentCancel/${e}`,{roomId:t},{headers:{Authorization:`Bearer ${a}`}})}},3:function(e,t,a){var s=a(5130),o=a(6768);function n(e,t,a,s,n,r){const i=(0,o.g2)("NavBar"),l=(0,o.g2)("DefaultLayout");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(i),(0,o.bF)(l)],64)}const r={class:"layout"},i={class:"main-content"};function l(e,t,a,s,n,l){const c=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("main",i,[(0,o.bF)(c)])])}var c={name:"DefaultLayout"},u=a(1241);const d=(0,u.A)(c,[["render",l],["__scopeId","data-v-48edadd4"]]);var h=d;const p={class:"navbar"},m={class:"navbar_logo"},v={class:"navbar_items"},f={key:0,class:"navbar_item"},g={key:1,class:"navbar_item"};function k(e,t,a,s,n,r){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",p,[(0,o.Lk)("div",m,[(0,o.Lk)("span",{class:"brand_name",onClick:t[0]||(t[0]=e=>r.to_home())},"HotelJava")]),(0,o.Lk)("div",v,[s.isLoggedIn?((0,o.uX)(),(0,o.CE)("ul",g,[(0,o.Lk)("li",null,[(0,o.bF)(i,{to:"/"},{default:(0,o.k6)((()=>[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.logout&&s.logout(...e)),class:"logout_btn"},"로그아웃")])),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(i,{to:"/my_page"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.Lk)("span",{class:"my_page_btn"},"마이페이지",-1)]))),_:1})])])):((0,o.uX)(),(0,o.CE)("ul",f,[(0,o.Lk)("li",null,[(0,o.bF)(i,{to:"/login"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.Lk)("span",{class:"login_btn"},"로그인",-1)]))),_:1})]),(0,o.Lk)("li",null,[(0,o.bF)(i,{to:"/register"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.Lk)("span",{class:"signup_btn"},"회원가입",-1)]))),_:1})])]))])])}a(4114);var y=a(6698),b={name:"theNavbar",setup(){const e=(0,y.n)(),t=(0,o.EW)((()=>e.LoggedIn)),a=()=>{e.logout()};return{isLoggedIn:t,logout:a}},methods:{to_my_page(){this.$router.push("/my_page")},to_home(){this.$router.push("/")}}};const w=(0,u.A)(b,[["render",k],["__scopeId","data-v-68b701cd"]]);var L=w,C={name:"App",components:{DefaultLayout:h,NavBar:L}};const I=(0,u.A)(C,[["render",n]]);var E=I,R=a(5234),_=a(1387),P=a(4232);const S={class:"main-container"},A={class:"search-container"},T={key:0,class:"autocomplete-list"},X=["onClick"],U={class:"autocomplete-hotel-name"},N={class:"hotel-address"},V={key:0,class:"no-results"},D={class:"hotel_list_container"},F={class:"hotel_grid"},M=["src"],$={class:"hotel-name"};function H(e,t,a,n,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",A,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),class:"search-bar",type:"text",placeholder:"호텔 검색",onClick:t[1]||(t[1]=(...e)=>i.searchHotel&&i.searchHotel(...e))},null,512),[[s.Jo,r.searchQuery]]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.searchHotel&&i.searchHotel(...e)),class:"search-button"}," 🔍 ")]),r.searchQuery.length>0?((0,o.uX)(),(0,o.CE)("ul",T,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.autocompleteResults,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.hotelId,onClick:a=>e.goToHotelDetail(t.hotelId),class:"autocomplete-item"},[(0,o.Lk)("span",U,(0,P.v_)(t.name),1),(0,o.Lk)("span",N,(0,P.v_)(t.address||"주소 정보 없음"),1)],8,X)))),128)),r.noResults?((0,o.uX)(),(0,o.CE)("li",V,"연관된 검색어가 없습니다.")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.fetchRandomHotels&&i.fetchRandomHotels(...e)),class:"refresh-button"}," 🔄 "),(0,o.Lk)("div",D,[(0,o.Lk)("div",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.randomHotels,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.hotelId,class:"hotel-container"},[(0,o.bF)(l,{to:`/hotel-details/${e.hotelId}`},{default:(0,o.k6)((()=>[(0,o.Lk)("img",{src:e.imageUrl||r.defaultImage,class:"img-container",alt:"Hotel Image"},null,8,M)])),_:2},1032,["to"]),(0,o.Lk)("div",$,(0,P.v_)(e.name),1),t[4]||(t[4]=(0,o.Lk)("div",{class:"hotel-info"},[(0,o.Lk)("span",{class:"rating"},"⭐4.5"),(0,o.Lk)("span",null,"(리뷰 갯수)")],-1))])))),128))]),t[5]||(t[5]=(0,o.Fv)('<h2 class="review-title" data-v-762890b2>리뷰 Top 10</h2><div class="hotel_grid" data-v-762890b2><div class="hotel-container" data-v-762890b2><img class="img-container" src="https://www.agoda.com/wp-content/uploads/2019/05/Best-hotels-in-Seoul-South-Korea-accommodations-The-Shilla-Seoul.jpg" data-v-762890b2><div class="hotel-name" data-v-762890b2>호텔명</div><div class="hotel-info" data-v-762890b2><span class="rating" data-v-762890b2>⭐4.5</span><span data-v-762890b2>(리뷰갯수)</span></div></div></div><h2 class="review-title" data-v-762890b2>별점 Top 10</h2><div class="hotel_grid" data-v-762890b2><div class="hotel-container" data-v-762890b2><img class="img-container" src="https://www.agoda.com/wp-content/uploads/2019/05/Best-hotels-in-Seoul-South-Korea-accommodations-The-Shilla-Seoul.jpg" data-v-762890b2><div class="hotel-name" data-v-762890b2>호텔명</div><div class="hotel-info" data-v-762890b2><span class="rating" data-v-762890b2>⭐4.5</span><span data-v-762890b2>(리뷰갯수)</span></div></div></div>',4))])])}var Q=a(4373),q={name:"MainPage",data(){return{searchQuery:"",autocompleteResults:[],randomHotels:[],defaultImage:"https://png.pngtree.com/png-vector/20240613/ourlarge/pngtree-modern-hotel-icon-with-palm-trees-black-isolated-on-white-background-vector-png-image_7010310.png",noResults:!1}},created(){this.fetchRandomHotels()},methods:{async fetchRandomHotels(){try{const e=await Q.A.get("http://localhost:8081/api/hotels/random");this.randomHotels=e.data}catch(e){console.error("랜덤 호텔 데이터를 가져오는 중 오류 발생:",e)}},fetchAutocompleteResults(){if(this.autocompleteResults=[],this.searchQuery.length>0){const e=this.searchQuery.replace(/\s+/g,"");Q.A.get(`http://localhost:8081/api/hotels/search?query=${e}`).then((e=>{this.autocompleteResults=e.data,this.noResults=0===this.autocompleteResults.length})).catch((e=>{console.error("자동 완성 결과를 가져오는 중 오류 발생:",e),this.autocompleteResults=[],this.noResults=!0}))}else this.autocompleteResults=[],this.noResults=!1},searchHotel(){this.$router.push({path:"/search-results",query:{query:this.searchQuery}})},goToSearchPage(){this.$router.push({path:"/search-page",query:{query:this.searchQuery}})}}};const O=(0,u.A)(q,[["render",H],["__scopeId","data-v-762890b2"]]);var x=O;const J={class:"container"},K={class:"form-group"},B={class:"form-group"},j={class:"form-group"},W={class:"form-group email-group"},z={class:"form-group"};function Y(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",J,[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[t[11]||(t[11]=(0,o.Lk)("h2",null,"회원가입",-1)),(0,o.Lk)("div",K,[t[6]||(t[6]=(0,o.Lk)("label",{for:"name"},"이름",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,512),[[s.Jo,n.name]])]),(0,o.Lk)("div",B,[t[7]||(t[7]=(0,o.Lk)("label",{for:"password"},"비밀번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,512),[[s.Jo,n.password]])]),(0,o.Lk)("div",j,[t[8]||(t[8]=(0,o.Lk)("label",{for:"passwordConfirm"},"비밀번호 확인",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":t[2]||(t[2]=e=>n.passwordConfirm=e)},null,512),[[s.Jo,n.passwordConfirm]])]),(0,o.Lk)("div",W,[(0,o.Lk)("div",null,[t[9]||(t[9]=(0,o.Lk)("label",{for:"email"},"이메일",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>n.authStore.email=e),disabled:""},null,512),[[s.Jo,n.authStore.email]])])]),(0,o.Lk)("div",z,[t[10]||(t[10]=(0,o.Lk)("label",{for:"phone"},"전화번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[4]||(t[4]=e=>n.phone=e)},null,512),[[s.Jo,n.phone]])]),t[12]||(t[12]=(0,o.Lk)("button",{type:"submit",class:"signup-button"},"회원가입",-1))],32)])}var G=a(144),Z={name:"SignupForm",setup(){const e=(0,y.n)(),t=(0,_.rd)(),a=(0,G.KR)(""),s=(0,G.KR)(""),n=(0,G.KR)(""),r=(0,G.KR)(""),i=(0,G.KR)("");(0,o.sV)((()=>{e.verificationToken?a.value=e.email:t.push("/verify-email?mode=signup")}));const l=async()=>{if(r.value!==i.value)return void alert("비밀번호가 일치하지 않습니다.");e.verificationToken||(alert("이메일 인증 토큰이 없습니다. 이메일 인증을 다시 진행해주세요."),t.push("/verify-email"));const o={email:a.value,name:s.value,phone:n.value,password:r.value};try{const a=await e.signup(o);a&&201===a.status?(alert("회원가입이 완료되었습니다!"),t.push("/login")):alert(`회원가입 중 오류 발생: ${a.data}`)}catch(l){l.response&&l.response.data?alert(`회원가입 중 오류 발생: ${l.response.data}`):alert("회원가입 중 알 수 없는 오류가 발생했습니다."),console.error(`회원가입 중 오류 발생: ${l}`)}};return{email:a,name:s,phone:n,password:r,passwordConfirm:i,submitForm:l,authStore:e}}};const ee=(0,u.A)(Z,[["render",Y],["__scopeId","data-v-13e978e4"]]);var te=ee;const ae={class:"container"},se={class:"login-form"},oe={class:"input-group"},ne={class:"input-group"},re={class:"top-actions"},ie={class:"social-login"};function le(e,t,a,n,r,i){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ae,[(0,o.Lk)("div",se,[t[9]||(t[9]=(0,o.Lk)("h2",{class:"title"},"로그인",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",oe,[t[5]||(t[5]=(0,o.Lk)("label",{for:"email"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e)},null,512),[[s.Jo,r.email]])]),(0,o.Lk)("div",ne,[t[6]||(t[6]=(0,o.Lk)("label",{for:"password"},"비밀번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"passwd","onUpdate:modelValue":t[1]||(t[1]=e=>r.passwd=e)},null,512),[[s.Jo,r.passwd]])]),(0,o.Lk)("div",re,[(0,o.bF)(l,{to:"/find-my-id"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("span",{class:"find-id-btn"},"아이디 찾기",-1)]))),_:1}),t[8]||(t[8]=(0,o.Lk)("button",{type:"submit",class:"login-button"},"로그인",-1))])],32),t[10]||(t[10]=(0,o.Lk)("div",{class:"divider"},[(0,o.Lk)("span",null,"SNS LOGIN")],-1)),(0,o.Lk)("div",ie,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.googleLogin&&i.googleLogin(...e)),class:"social-button google"},"G"),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.naverLogin&&i.naverLogin(...e)),class:"social-button naver"},"N")])])])}var ce={name:"LoginForm",data(){return{email:"",passwd:""}},methods:{async googleLogin(){window.location.href="http://localhost:8081/oauth2/authorization/google"},async naverLogin(){window.location.href="http://localhost:8081/oauth2/authorization/naver"},async submitForm(){const e={email:this.email,passwd:this.passwd};try{const t=(0,y.n)();await t.login(e),alert("로그인 성공!"),wa.push({path:"/"})}catch(t){console.error("로그인 중 오류 발생: ",t),alert("로그인 실패. 이메일과 비밀번호를 확인하세요.")}}}};const ue=(0,u.A)(ce,[["render",le],["__scopeId","data-v-b7d7c43c"]]);var de=ue;function he(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",null,"로그인 처리 중입니다...")}var pe={name:"OAuthRedirectHandler",setup(){const e=(0,y.n)(),t=(0,_.rd)(),a=(0,_.lq)(),s=async()=>{const s=a.query.token;if(s){e.setAccessToken(s);try{const a=await Q.A.get("http://localhost:8081/api/users/me",{headers:{Authorization:`Bearer ${s}`}});if(a&&200===a.status){const o=a.data;e.currentUser=o.email,e.userId=o.userId,e.userName=o.name,e.phone=o.phone,e.LoggedIn=!0,localStorage.setItem("userInfo",JSON.stringify({userName:o.name,userId:o.userId,email:o.email,phone:o.phone})),sessionStorage.setItem("token",s),t.push({path:"/"})}else console.error("사용자 정보를 가져오는 데 실패했습니다."),alert("사용자 정보를 가져오는 데 실패했습니다. 다시 시도해 주세요."),t.push({path:"/login"})}catch(o){console.error("사용자 정보 요청 실패:",o),alert("사용자 정보 요청에 실패했습니다. 다시 시도해 주세요."),t.push({path:"/login"})}}else alert("오류가 발생했습니다. 로그인 실패."),t.push({path:"/login"})};return s(),{}}};const me=(0,u.A)(pe,[["render",he]]);var ve=me;const fe={class:"verification-container"},ge={key:0},ke=["disabled"],ye={key:1},be={key:2};function we(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",fe,[t[7]||(t[7]=(0,o.Lk)("h2",null,"이메일 인증",-1)),e.verificationToken?n.isVerified?((0,o.uX)(),(0,o.CE)("div",ye,[t[5]||(t[5]=(0,o.Lk)("p",null,"이메일 인증이 완료되었습니다.",-1)),"signup"===n.mode?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>n.proceedToSignup&&n.proceedToSignup(...e))}," 회원가입 페이지로 이동 ")):"resetPassword"===n.mode?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[4]||(t[4]=(...e)=>n.proceedToResetPassword&&n.proceedToResetPassword(...e))}," 비밀번호 재설정 페이지로 이동 ")):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",be,t[6]||(t[6]=[(0,o.Lk)("p",null,"이메일 인증 중입니다...",-1)]))):((0,o.uX)(),(0,o.CE)("div",ge,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),placeholder:"이메일을 입력하세요",onBlur:t[1]||(t[1]=e=>"signup"===n.mode?n.checkEmailAvailability():null)},null,544),[[s.Jo,n.email]]),"signup"===n.mode&&n.emailMessage?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,P.C4)({error:!n.isEmailAvailable,success:n.isEmailAvailable})},(0,P.v_)(n.emailMessage),3)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.sendVerificationEmail&&n.sendVerificationEmail(...e)),disabled:"signup"===n.mode&&!n.isEmailAvailable}," 인증 요청 ",8,ke)]))])}var Le={name:"EmailVerificationPage",setup(){const e=(0,_.lq)(),t=(0,_.rd)(),a=(0,y.n)(),s=(0,G.KR)(e.query.mode),n=(0,G.KR)(e.query.token),r=(0,G.KR)(""),i=(0,G.KR)(!1),l=(0,G.KR)(""),c=(0,G.KR)(!1);console.log("초기 verificationToken:",n.value),console.log("초기 mode:",s.value);const u=async()=>{if(!r.value)return l.value="이메일을 입력해주세요.",void(c.value=!1);try{await a.checkEmailAvailability(r.value),l.value=a.emailMessage,c.value=a.isEmailAvailable}catch(e){console.error("이메일 중복 확인 실패:",e),l.value="이메일 중복 확인 중 오류가 발생했습니다.",c.value=!1}},d=async()=>{if(r.value)if("signup"!==s.value||c.value)try{await a.sendVerificationEmail(r.value,s.value),alert("인증 이메일이 발송되었습니다. 메일을 확인해주세요.")}catch(e){console.error("이메일 발송 실패:",e),alert("이메일 발송 중 오류가 발생했습니다.")}else alert("사용할 수 없는 이메일입니다. 다른 이메일을 사용해주세요.");else alert("이메일을 입력해주세요.")};(0,o.wB)(n,(async e=>{if(e)try{console.log("인증 요청을 보낼 토큰:",e);const o=await a.verifyEmailToken(e);console.log("스프링에서 받은 이메일 인증 결과:",o.data),o.data&&o.data.success?(i.value=!0,a.verificationToken=e,r.value=o.data.email,a.email=o.data.email,"signup"===s.value?t.push({path:"/register"}):"resetPassword"===s.value?t.push({path:"/reset-password"}):"editPassword"===s.value&&(localStorage.setItem("verifiedEmail",r.value),localStorage.setItem("verificationToken",e),alert("이메일 인증이 완료되었습니다. 비밀번호 변경을 진행해주세요."),window.close())):(console.error("응답 데이터에서 success 값을 찾을 수 없습니다.",o),alert("이메일 인증에 실패했습니다. 토큰이 만료되었거나 유효하지 않습니다. 다시 인증을 요청하세요."),t.push({path:"/verify-email",query:{mode:s.value}}))}catch(o){console.error("이메일 인증 중 오류 발생: ",o),alert("유효하지 않은 인증 토큰입니다.")}}),{immediate:!0});const h=()=>{t.push({path:"/register"})},p=()=>{t.push({path:"/reset-password"})};return{email:r,emailMessage:l,isEmailAvailable:c,isVerified:i,mode:s,checkEmailAvailability:u,sendVerificationEmail:d,proceedToSignup:h,proceedToResetPassword:p}}};const Ce=(0,u.A)(Le,[["render",we],["__scopeId","data-v-3cfa773a"]]);var Ie=Ce;const Ee={class:"password-reset-container"},Re={key:0},_e={key:1};function Pe(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",Ee,[t[3]||(t[3]=(0,o.Lk)("h2",null,"비밀번호 재설정",-1)),s.isEmailSent?((0,o.uX)(),(0,o.CE)("div",_e,t[2]||(t[2]=[(0,o.Lk)("p",null,"임시 비밀번호가 이메일로 발송되었습니다. 이메일을 확인하세요.",-1)]))):((0,o.uX)(),(0,o.CE)("div",Re,[t[1]||(t[1]=(0,o.Lk)("p",null,"임시 비밀번호를 발급하기 위해 이메일 인증을 완료하세요.",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.sendResetPasswordEmail&&s.sendResetPasswordEmail(...e))},"비밀번호 재설정 요청")]))])}const Se=(0,R.nY)("resetPassword",{state:()=>({email:"",token:""}),actions:{setEmail(e){this.email=e},setToken(e){this.token=e},clearData(){this.email="",this.token=""}}});var Ae=a(412),Te={name:"PasswordResetPage",setup(){const e=Se(),t=(0,y.n)(),a=(0,_.rd)(),s=(0,G.KR)(!1);(0,o.sV)((()=>{t.verificationToken&&t.email?(e.email=t.email,e.token=t.verificationToken):(alert("이메일 인증 정보가 없습니다. 이메일 인증 페이지로 이동합니다."),a.push({path:"/verify-email",query:{mode:"resetPassword"}}))}));const n=async()=>{if(e.email&&e.token)try{const t=await(0,Ae.KW)(e.email,e.token);200===t.status?(s.value=!0,alert("임시 비밀번호가 이메일로 발송되었습니다.")):alert("비밀번호 재설정 요청 중 오류가 발생했습니다.")}catch(t){console.error("비밀번호 재설정 요청 실패:",t),alert("비밀번호 재설정 중 오류가 발생했습니다. 다시 시도해주세요.")}else alert("이메일 인증 정보가 없습니다. 이메일 인증을 먼저 해주세요.")};return{isEmailSent:s,sendResetPasswordEmail:n}}};const Xe=(0,u.A)(Te,[["render",Pe],["__scopeId","data-v-61bf98a0"]]);var Ue=Xe;const Ne={class:"mypage-container"},Ve={class:"router-view-container"},De={class:"favorite-hotels"},Fe={class:"hotel-list"},Me={key:0};function $e(e,t,a,s,n,r){const i=(0,o.g2)("SidebarComponent"),l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",Ne,[(0,o.bF)(i,{class:"sidebar"}),(0,o.Lk)("div",Ve,[(0,o.bF)(l,null,{default:(0,o.k6)((({Component:e})=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e),{"user-name":n.userName,email:n.email,phone:n.phone,reviews:n.reviews},null,8,["user-name","email","phone","reviews"]))])),_:1})]),(0,o.Lk)("div",De,[t[0]||(t[0]=(0,o.Lk)("h2",null,"찜한 호텔 목록",-1)),(0,o.Lk)("div",Fe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.favoriteHotels,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"hotel-item",key:t},(0,P.v_)(e.name),1)))),128)),0===n.favoriteHotels.length?((0,o.uX)(),(0,o.CE)("div",Me,"찜한 호텔 목록이 없습니다.")):(0,o.Q3)("",!0)])])])}const He={class:"sidebar"};function Qe(e,t){const a=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",He,[t[3]||(t[3]=(0,o.Lk)("h2",null,"내 정보",-1)),(0,o.bF)(a,{to:"/my_page","exact-active-class":"active-link"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("내 정보 및 리뷰")]))),_:1}),(0,o.bF)(a,{to:"/my_page/reservations","exact-active-class":"active-link"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("예약 내역 및 예약 현황")]))),_:1}),(0,o.bF)(a,{to:"/my_page/edit-info","exact-active-class":"active-link"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("계정 설정")]))),_:1})])}const qe={},Oe=(0,u.A)(qe,[["render",Qe],["__scopeId","data-v-7cd401e6"]]);var xe=Oe,Je={name:"MyPage",components:{SidebarComponent:xe},data(){return{userName:"",email:"",phone:"",reviews:[],favoriteHotels:[]}},mounted(){const e=JSON.parse(localStorage.getItem("userInfo"));e?(this.userName=e.userName||"이름을 추가해주세요.",this.email=e.email||"이메일을 추가해주세요.",this.phone=e.phone||"전화번호를 추가해주세요."):console.log("로컬 스토리지에 userInfo가 없습니다.")}};const Ke=(0,u.A)(Je,[["render",$e],["__scopeId","data-v-85d5741a"]]);var Be=Ke;const je={class:"content"},We={class:"user-info"},ze={class:"review-section"},Ye={class:"review-list"},Ge={key:0},Ze={class:"review-top"},et={class:"review-date"},tt={class:"review-content"};function at(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",je,[(0,o.Lk)("div",We,[t[0]||(t[0]=(0,o.Lk)("h2",null,"내 정보",-1)),(0,o.Lk)("p",null,"이름: "+(0,P.v_)(a.userName||"이름을 추가해 주세요."),1),(0,o.Lk)("p",null,"이메일: "+(0,P.v_)(a.email||"이메일을 추가해 주세요."),1),(0,o.Lk)("p",null,"전화번호: "+(0,P.v_)(a.phone||"전화번호를 추가해 주세요."),1)]),(0,o.Lk)("div",ze,[t[2]||(t[2]=(0,o.Lk)("h2",null,"리뷰",-1)),(0,o.Lk)("div",Ye,[0===a.reviews.length?((0,o.uX)(),(0,o.CE)("div",Ge,"작성한 리뷰가 없습니다.")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.reviews,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"review",key:a},[(0,o.Lk)("div",Ze,[t[1]||(t[1]=(0,o.Lk)("span",{class:"review-rating"},"⭐⭐⭐⭐⭐",-1)),(0,o.Lk)("span",et,(0,P.v_)(e.date),1)]),(0,o.Lk)("div",tt,(0,P.v_)(e.content),1)])))),128))])])])}var st={props:{userName:{type:String,default:""},email:{type:String,default:""},phone:{type:String,default:""},reviews:{type:Array,default:()=>[]}}};const ot=(0,u.A)(st,[["render",at],["__scopeId","data-v-5929e22b"]]);var nt=ot;const rt={class:"reservation-container"},it={class:"reservation-list"},lt={key:0},ct={key:1},ut={class:"reservation-info"},dt=["onClick"],ht={key:2},pt={class:"past-reservation-list"},mt={key:0},vt={class:"reservation-info"},ft={key:1};function gt(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",rt,[t[2]||(t[2]=(0,o.Lk)("h2",null,"현재 예약",-1)),(0,o.Lk)("div",it,[s.loading||0!==s.visibleUpcomingReservations?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",lt," 예약 내역이 없습니다. ")),s.loading?((0,o.uX)(),(0,o.CE)("div",ct,"예약 목록을 불러오는 중입니다...")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.visibleUpcomingReservations,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"reservation"},[(0,o.Lk)("div",ut,[(0,o.Lk)("p",null,"호텔 이름: "+(0,P.v_)(e.hotelName),1),(0,o.Lk)("p",null,"객실 이름: "+(0,P.v_)(e.roomName),1),(0,o.Lk)("p",null,"체크인: "+(0,P.v_)(e.checkIn),1),(0,o.Lk)("p",null,"체크아웃: "+(0,P.v_)(e.checkOut),1),(0,o.Lk)("p",null,"투숙 인원: "+(0,P.v_)(e.guestNum),1),(0,o.Lk)("p",null,"요청 사항: "+(0,P.v_)(e.request),1),(0,o.Lk)("p",null,"예약 상태: "+(0,P.v_)(e.status),1),s.canCancel(e.checkIn)?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>s.cancelReservation(e),class:"cancel-button"}," 결제 취소 ",8,dt)):(0,o.Q3)("",!0)])])))),128)),e.upcomingReservations>s.visibleUpcomingReservations?((0,o.uX)(),(0,o.CE)("div",ht,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.loadMoreUpcomingReservations&&s.loadMoreUpcomingReservations(...e))},"더 보기")])):(0,o.Q3)("",!0)]),t[3]||(t[3]=(0,o.Lk)("h2",null,"예약 기록",-1)),(0,o.Lk)("div",pt,[s.loading||0!==s.visiblePastReservations?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",mt," 지난 예약 내역이 없습니다. ")),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.visiblePastReservations,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"reservation"},[(0,o.Lk)("div",vt,[(0,o.Lk)("p",null,"호텔 이름: "+(0,P.v_)(e.hotelName),1),(0,o.Lk)("p",null,"객실 이름: "+(0,P.v_)(e.roomName),1),(0,o.Lk)("p",null,"체크인: "+(0,P.v_)(e.checkIn),1),(0,o.Lk)("p",null,"체크아웃: "+(0,P.v_)(e.checkOut),1),(0,o.Lk)("p",null,"투숙 인원: "+(0,P.v_)(e.guestNum),1),(0,o.Lk)("p",null,"요청 사항: "+(0,P.v_)(e.request),1),(0,o.Lk)("p",null,"예약 상태: "+(0,P.v_)(e.status),1)])])))),128)),e.pastReservations>s.visiblePastReservations?((0,o.uX)(),(0,o.CE)("div",ft,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.loadMorePastReservations&&s.loadMorePastReservations(...e))},"더 보기")])):(0,o.Q3)("",!0)])])}var kt=a(1576),yt=a.n(kt);const bt=(0,R.nY)("reservations",{state:()=>({reservations:[],upcomingReservations:[],pastReservations:[],visibleUpcomingReservations:[],visiblePastReservations:[],loading:!1,pageUpcoming:1,pagePast:1,itemsPerPageUpcoming:5,itemsPerPagePast:10}),actions:{async fetchReservations(){try{this.loading=!0;const e=sessionStorage.getItem("token");if(!e)return alert("로그인이 필요합니다."),void(this.loading=!1);console.log("사용자 토큰:",e);const t=await(0,Ae.T2)(e);console.log("예약 목록 응답:",t.data),this.reservations=t.data.filter((e=>"결제 취소"!==e.paymentStatus)),this.reservations=this.reservations.sort(((e,t)=>new Date(t.checkIn)-new Date(e.checkIn)));const a=yt()();this.upcomingReservations=this.reservations.filter((e=>yt()(e.checkIn).isAfter(a))),this.pastReservations=this.reservations.filter((e=>yt()(e.checkIn).isBefore(a))),this.pageUpcoming=1,this.pagePast=1,this.visibleUpcomingReservations=this.upcomingReservations.slice(0,this.itemsPerPageUpcoming),this.visiblePastReservations=this.pastReservations.slice(0,this.itemsPerPagePast),this.loading=!1}catch(e){console.error("예약 목록 불러오기 오류:",e),this.loading=!1,alert("예약 목록을 불러오는 중 오류가 발생했습니다.")}},loadMoreUpcomingReservations(){const e=this.pageUpcoming*this.itemsPerPageUpcoming,t=e+this.itemsPerPageUpcoming,a=this.upcomingReservations.slice(e,t);this.visibleUpcomingReservations=[...this.visibleUpcomingReservations,...a],this.pageUpcoming+=1},loadMorePastReservations(){const e=this.pagePast*this.itemsPerPagePast,t=e+this.itemsPerPagePast,a=this.pastReservations.slice(e,t);this.visiblePastReservations=[...this.visiblePastReservations,...a],this.pagePast+=1}}});var wt={setup(){const e=bt();(0,o.sV)((()=>{e.fetchReservations()}));const t=(0,o.EW)((()=>e.visibleUpcomingReservations||[])),a=(0,o.EW)((()=>e.visiblePastReservations||[])),s=(0,o.EW)((()=>e.loading)),n=e=>{const t=yt()(),a=yt()(e);return a.diff(t,"day")>=2},r=async t=>{try{const a=sessionStorage.getItem("token");if(!a)return void alert("로그인이 필요합니다.");const s=t.imp_uid,o=t.roomId,n=await(0,Ae.To)(s,o,a);200===n.status?(console.log("결제 취소 결과 : ",n.data),e.fetchReservations()):console.log("결제 취소 결과 : ",n.data)}catch(a){console.error("결제 취소 오류 : ",a),alert("결제 취소 중 오류가 발생했습니다.")}};return{visibleUpcomingReservations:t,visiblePastReservations:a,loading:s,loadMoreUpcomingReservations:e.loadMoreUpcomingReservations,loadMorePastReservations:e.loadMorePastReservations,canCancel:n,cancelReservation:r}}};const Lt=(0,u.A)(wt,[["render",gt],["__scopeId","data-v-3a5a0802"]]);var Ct=Lt;const It={class:"user-edit-container"},Et={class:"form-group"},Rt={class:"form-group"},_t={class:"form-group"},Pt={class:"form-group"},St={key:0,class:"error-text"},At=["disabled"],Tt={class:"form-group"},Xt={class:"form-group"},Ut=["disabled"],Nt={key:0,class:"form-group"},Vt=["disabled"];function Dt(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",It,[t[18]||(t[18]=(0,o.Lk)("h2",null,"회원 정보 수정",-1)),(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",Et,[t[11]||(t[11]=(0,o.Lk)("label",{for:"userName"},"이름",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"userName","onUpdate:modelValue":t[0]||(t[0]=e=>n.userName=e),placeholder:"이름을 입력하세요"},null,512),[[s.Jo,n.userName]])]),(0,o.Lk)("div",Rt,[t[12]||(t[12]=(0,o.Lk)("label",{for:"email"},"이메일",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"이메일을 입력하세요",disabled:""},null,512),[[s.Jo,n.email]]),t[13]||(t[13]=(0,o.Lk)("p",{class:"info-text"},"이메일은 수정할 수 없습니다.",-1))]),(0,o.Lk)("div",_t,[t[14]||(t[14]=(0,o.Lk)("label",{for:"phone"},"전화번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"tel",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>n.phone=e),placeholder:"전화번호를 입력하세요"},null,512),[[s.Jo,n.phone]])]),(0,o.Lk)("div",Pt,[t[15]||(t[15]=(0,o.Lk)("label",{for:"currentPassword"},"현재 비밀번호 확인",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[3]||(t[3]=e=>r.currentPassword=e),onInput:t[4]||(t[4]=(...e)=>i.checkPassword&&i.checkPassword(...e)),placeholder:"현재 비밀번호를 입력하세요"},null,544),[[s.Jo,r.currentPassword]]),!r.isPasswordValid&&r.currentPassword?((0,o.uX)(),(0,o.CE)("p",St," 비밀번호가 올바르지 않습니다. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"submit",class:"submit-button",disabled:!r.isPasswordValid}," 수정 완료 ",8,At)],32),t[19]||(t[19]=(0,o.Lk)("hr",null,null,-1)),t[20]||(t[20]=(0,o.Lk)("h2",null,"비밀번호 변경",-1)),(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,s.D$)(((...e)=>i.sendVerificationCode&&i.sendVerificationCode(...e)),["prevent"]))},[(0,o.Lk)("div",Tt,[t[16]||(t[16]=(0,o.Lk)("label",{for:"newPassword"},"새 비밀번호",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[6]||(t[6]=e=>r.newPassword=e),placeholder:"새 비밀번호를 입력하세요"},null,512),[[s.Jo,r.newPassword]])]),(0,o.Lk)("div",Xt,[t[17]||(t[17]=(0,o.Lk)("label",{for:"passwordConfirmation"},"비밀번호 확인",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"passwordConfirmation","onUpdate:modelValue":t[7]||(t[7]=e=>r.passwordConfirmation=e),placeholder:"비밀번호를 다시 입력하세요"},null,512),[[s.Jo,r.passwordConfirmation]])]),(0,o.Lk)("button",{type:"submit",class:"send-email-button",disabled:r.newPassword!==r.passwordConfirmation}," 이메일 인증번호 전송 ",8,Ut)],32),r.isEmailSent?((0,o.uX)(),(0,o.CE)("div",Nt,[(0,o.Lk)("button",{type:"button",class:"submit-button",onClick:t[9]||(t[9]=(...e)=>i.changePassword&&i.changePassword(...e)),disabled:!r.isEmailSent}," 비밀번호 변경 ",8,Vt)])):(0,o.Q3)("",!0),t[21]||(t[21]=(0,o.Lk)("hr",null,null,-1)),t[22]||(t[22]=(0,o.Lk)("h2",null,"계정 탈퇴",-1)),(0,o.Lk)("button",{class:"delete-account-button",onClick:t[10]||(t[10]=(...e)=>i.confirmDeactivateAccount&&i.confirmDeactivateAccount(...e))}," 계정 탈퇴하기 ")])}var Ft={name:"UserEditPage",setup(){const e=(0,y.n)(),t=JSON.parse(localStorage.getItem("userInfo"))||{};return{userName:t.userName||"",email:t.email||"",phone:t.phone||"",authStore:e}},data(){return{currentPassword:"",isPasswordValid:!1,newPassword:"",passwordConfirmation:"",isEmailSent:!1,verificationCode:""}},methods:{async checkPassword(){try{const e=await this.authStore.verifyPassword(this.currentPassword);this.isPasswordValid=200===e.status}catch(e){this.isPasswordValid=!1,console.error("비밀번호 확인 오류:",e)}},async submitForm(){if(this.isPasswordValid)try{await this.authStore.updateUserInfo({userName:this.userName,phone:this.phone}),alert("회원 정보가 성공적으로 수정되었습니다.")}catch(e){console.error("회원 정보 수정 오류:",e),alert("회원 정보 수정 중 오류가 발생했습니다. 다시 시도해 주세요.")}},async sendVerificationCode(){if(this.newPassword===this.passwordConfirmation)try{await this.authStore.sendVerificationEmail(this.email,"editPassword"),this.isEmailSent=!0,alert("이메일로 인증번호가 발송되었습니다.")}catch(e){console.error("인증 이메일 발송 오류:",e),alert("인증 이메일 발송 중 오류가 발생했습니다. 다시 시도해 주세요.")}else alert("새 비밀번호와 확인 비밀번호가 일치하지 않습니다.")},async changePassword(){try{this.isEmailSent?(await this.authStore.changePassword(this.newPassword),alert("비밀번호가 성공적으로 변경되었습니다.")):alert("인증번호가 필요합니다.")}catch(e){console.error("비밀번호 변경 오류:",e),alert("비밀번호 변경 중 오류가 발생했습니다. 다시 시도해 주세요.")}},confirmDeactivateAccount(){const e=confirm("정말로 계정을 탈퇴하시겠습니까? 탈퇴 시 모든 데이터가 삭제됩니다.");e&&this.deactivateAccount()},async deactivateAccount(){try{await this.authStore.deactivateUser(),alert("계정이 성공적으로 탈퇴되었습니다."),this.authStore.logout(),window.location.href="/"}catch(e){console.error("계정 탈퇴 오류:",e),alert("계정 탈퇴 중 오류가 발생했습니다. 다시 시도해 주세요.")}}}};const Mt=(0,u.A)(Ft,[["render",Dt],["__scopeId","data-v-49547d10"]]);var $t=Mt;function Ht(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",null,t[0]||(t[0]=[(0,o.Fv)('<div class="sidebar" data-v-994f2c7e><h2 data-v-994f2c7e>Hotel Admin</h2><a href="#" data-v-994f2c7e><span class="icon" data-v-994f2c7e>🏨</span>Dashboard</a><a href="#" data-v-994f2c7e><span class="icon" data-v-994f2c7e>🛏️</span>Room Management</a><a href="#" data-v-994f2c7e><span class="icon" data-v-994f2c7e>📅</span>Reservation Management</a><a href="#" data-v-994f2c7e><span class="icon" data-v-994f2c7e>📊</span>Analytics</a><a href="#" data-v-994f2c7e><span class="icon" data-v-994f2c7e>⚙️</span>Settings</a></div><div class="main-content" data-v-994f2c7e><div class="hotel-admin" data-v-994f2c7e><h1 data-v-994f2c7e>Hotel Admin Dashboard</h1></div><div class="card-container" data-v-994f2c7e><div class="card" data-v-994f2c7e><h3 data-v-994f2c7e>Room Management</h3><p data-v-994f2c7e>Manage room availability, occupancy, and room details.</p></div><div class="card" data-v-994f2c7e><h3 data-v-994f2c7e>Reservation Management</h3><p data-v-994f2c7e>View and update guest reservations and statuses.</p></div><div class="card" data-v-994f2c7e><h3 data-v-994f2c7e>Analytics</h3><p data-v-994f2c7e>Track booking statistics and guest trends.</p></div><div class="card" data-v-994f2c7e><h3 data-v-994f2c7e>Settings</h3><p data-v-994f2c7e>Update hotel configurations and manage preferences.</p></div></div></div>',2)]))}var Qt={name:"HotelAdminPage"};const qt=(0,u.A)(Qt,[["render",Ht],["__scopeId","data-v-994f2c7e"]]);var Ot=qt;const xt={class:"search-page"},Jt={class:"search-container"},Kt={class:"search-bar"},Bt={key:0,class:"autocomplete-list"},jt=["onClick"],Wt={class:"hotel-name"},zt={class:"hotel-address"},Yt={key:0,class:"no-results"},Gt={class:"date-picker"},Zt=["min"],ea=["min"],ta={key:1,class:"warning-message"},aa={class:"occupancy-selector"},sa=["value"],oa={class:"map-button-container"},na={class:"results"},ra={key:0},ia=["onClick"],la=["src"],ca={class:"hotel-info"};function ua(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",xt,[(0,o.Lk)("div",Jt,[(0,o.Lk)("div",Kt,[t[7]||(t[7]=(0,o.Lk)("span",{class:"icon"},"🔍",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",placeholder:"지역, 숙소명 키워드로 찾아보세요",onKeyup:t[1]||(t[1]=(0,s.jR)(((...e)=>i.performSearch&&i.performSearch(...e)),["enter"]))},null,544),[[s.Jo,r.searchQuery]])]),r.autocompleteResults.length>0?((0,o.uX)(),(0,o.CE)("ul",Bt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.autocompleteResults,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.hotelId,onClick:t=>i.selectAutocompleteResult(e),class:"autocomplete-item"},[(0,o.Lk)("span",Wt,(0,P.v_)(e.name),1),(0,o.Lk)("span",zt,(0,P.v_)(e.address||"주소 정보 없음"),1)],8,jt)))),128)),r.noResults?((0,o.uX)(),(0,o.CE)("li",Yt,"연관된 검색어가 없습니다.")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Gt,[t[8]||(t[8]=(0,o.Lk)("span",{class:"icon"},"📅",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.checkInDate=e),min:r.today,placeholder:"체크인",onChange:t[3]||(t[3]=(...e)=>i.validateCheckInDate&&i.validateCheckInDate(...e))},null,40,Zt),[[s.Jo,r.checkInDate]]),t[9]||(t[9]=(0,o.Lk)("span",null,"~",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>r.checkOutDate=e),min:r.checkInDate||r.today,placeholder:"체크아웃"},null,8,ea),[[s.Jo,r.checkOutDate]])]),r.dateWarning?((0,o.uX)(),(0,o.CE)("div",ta,(0,P.v_)(r.dateWarning),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",aa,[t[10]||(t[10]=(0,o.Lk)("span",{class:"icon"},"👤",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.totalGuests=e)},[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(20,(e=>(0,o.Lk)("option",{key:e,value:e},(0,P.v_)(e)+"명",9,sa))),64))],512),[[s.u1,r.totalGuests]])])]),(0,o.Lk)("div",oa,[(0,o.Lk)("button",{class:"map-button",onClick:t[6]||(t[6]=(...e)=>i.goToMapView&&i.goToMapView(...e))},"지도 보기")]),(0,o.Lk)("div",na,[0===r.hotels.length?((0,o.uX)(),(0,o.CE)("div",ra,"검색 결과가 없습니다.")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.hotels,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.hotelId,class:"hotel-item",onClick:t=>i.goToHotelDetail(e.hotelId)},[(0,o.Lk)("img",{src:e.imageUrl||r.defaultImage,alt:"Hotel Image",class:"hotel-image"},null,8,la),(0,o.Lk)("div",ca,[(0,o.Lk)("h3",null,(0,P.v_)(e.name),1),(0,o.Lk)("p",null,(0,P.v_)(e.address||"주소 정보 없음"),1),(0,o.Lk)("p",null,"평점: "+(0,P.v_)(e.rating||"정보 없음"),1)])],8,ia)))),128))])])}var da={name:"SearchPage",data(){return{searchQuery:this.$route.query.query||"",hotels:[],checkInDate:"",checkOutDate:"",totalGuests:1,today:(new Date).toISOString().split("T")[0],defaultImage:"https://png.pngtree.com/png-vector/20240613/ourlarge/pngtree-modern-hotel-icon-with-palm-trees-black-isolated-on-white-background-vector-png-image_7010310.png",autocompleteResults:[],noResults:!1,dateWarning:""}},created(){this.searchQuery&&this.performSearch()},methods:{async performSearch(){const e={query:this.searchQuery||void 0,checkInDate:this.checkInDate||void 0,checkOutDate:this.checkOutDate||void 0,guests:this.totalGuests||1};try{const t=await Q.A.get("http://localhost:8081/api/hotels/search-by-date-and-guest",{params:e});this.hotels=t.data,this.$router.replace({query:{...this.$route.query,query:this.searchQuery}}),this.autocompleteResults=[],this.noResults=!1}catch(t){console.error("검색 결과를 가져오는 중 오류 발생:",t),this.hotels=[]}},async fetchAutocompleteResults(){if(this.searchQuery.length>0){const t=this.searchQuery.replace(/\s+/g,"");try{const e=await Q.A.get(`http://localhost:8081/api/hotels/search?query=${t}`);this.autocompleteResults=e.data,this.noResults=0===this.autocompleteResults.length}catch(e){console.error("자동 완성 결과를 가져오는 중 오류 발생:",e),this.autocompleteResults=[],this.noResults=!0}}else this.autocompleteResults=[],this.noResults=!1},validateCheckInDate(){this.checkInDate<this.today?(this.dateWarning="체크인 날짜는 오늘 이후로 선택해주세요.",this.checkInDate=""):this.dateWarning=""},updateCheckoutMinDate(){this.checkInDate&&this.checkInDate<this.today&&(this.checkInDate=this.today)},goToHotelDetail(e){this.$router.push(`/hotel-details/${e}`)},goToMapView(){this.$router.push({path:"/map-view",query:{hotels:JSON.stringify(this.hotels),query:this.searchQuery}})},selectAutocompleteResult(e){this.searchQuery=e.name,this.performSearch()}},watch:{searchQuery(){this.fetchAutocompleteResults()}}};const ha=(0,u.A)(da,[["render",ua],["__scopeId","data-v-666d634a"]]);var pa=ha;const ma={class:"map-page"};function va(e,t,a,s,n,r){return(0,o.uX)(),(0,o.CE)("div",ma,[t[1]||(t[1]=(0,o.Lk)("h2",null,"지도",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.goToSearchPage&&r.goToSearchPage(...e)),class:"back-button"},"검색 페이지로 돌아가기"),t[2]||(t[2]=(0,o.Lk)("div",{id:"map"},null,-1))])}var fa={name:"MapPage",props:{hotels:{type:Array,required:!1,default:()=>[]},location:{type:String,required:!1}},data(){return{mapHotels:[]}},async mounted(){this.hotels.length>0?this.mapHotels=this.hotels:await this.fetchHotels(),this.loadKakaoMap()},beforeUnmount(){const e=document.querySelector("script[src*='//dapi.kakao.com/v2/maps/sdk.js']");e&&(e.remove(),delete window.kakao)},methods:{async fetchHotels(){try{const e=await Q.A.get(`http://localhost:8081/api/hotels/search?location=${this.location||""}`);console.log("API response:",e.data),this.mapHotels=Array.isArray(e.data)?e.data:[],console.log("mapHotels:",this.mapHotels)}catch(e){console.error("호텔 목록을 가져오는 중 오류 발생:",e),this.mapHotels=[]}},loadKakaoMap(){if("undefined"===typeof kakao){const e=document.createElement("script"),t="d685c63d7eb74d08883cdb9e13b5fb6c";e.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${t}&autoload=false`,e.onload=this.initMap,document.head.appendChild(e)}else this.initMap()},initMap(){kakao.maps.load((()=>{const e=document.getElementById("map"),t={center:new kakao.maps.LatLng(37.5665,126.978),level:5},a=new kakao.maps.Map(e,t),s=new kakao.maps.LatLngBounds,o="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";Array.isArray(this.mapHotels)&&this.mapHotels.length>0?(this.mapHotels.forEach((e=>{if(e.mapY&&e.mapX){const t=new kakao.maps.LatLng(e.mapY,e.mapX),n=new kakao.maps.Size(24,35),r=new kakao.maps.MarkerImage(o,n),i=new kakao.maps.Marker({map:a,position:t,title:e.name,image:r});s.extend(t);const l=`\n                  <div style="\n                      width: 200px; \n                      padding: 10px; \n                      font-family: Arial, sans-serif; \n                      color: #333;\n                      border-radius: 8px;\n                  ">\n                      <img src="${e.imageUrl}" \n                          alt="${e.name}" \n                          style="width: 100%; height: auto; border-radius: 8px; margin-bottom: 8px;" />\n                      <strong style="display: block; font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px;">\n                      ${e.name}\n                      </strong>\n                      <span style="font-size: 14px; color: #666; line-height: 1.5;">\n                      ${e.address}\n                      </span>\n                  </div>\n                  `,c=new kakao.maps.InfoWindow({content:l,removable:!1});kakao.maps.event.addListener(i,"mouseover",(()=>{c.open(a,i)})),kakao.maps.event.addListener(i,"mouseout",(()=>{c.close()})),kakao.maps.event.addListener(i,"click",(()=>{this.$router.push(`/hotel-details/${e.hotelId}`)}))}})),a.setBounds(s)):console.warn("mapHotels 배열이 비어 있습니다.")}))},goToSearchPage(){this.$router.push({path:"/search-results",query:{query:this.$route.query.query}})}}};const ga=(0,u.A)(fa,[["render",va],["__scopeId","data-v-f658515e"]]);var ka=ga;const ya=[{path:"/",component:x},{path:"/my_page",component:Be,children:[{path:"",component:nt},{path:"reservations",component:Ct},{path:"edit-info",component:$t}]},{path:"/register",component:te},{path:"/login",component:de},{path:"/hotel-details/:id",component:()=>a.e(310).then(a.bind(a,1310))},{path:"/room-details/:roomId",component:()=>a.e(535).then(a.bind(a,6535)),name:"HotelRoom"},{path:"/oauth2/success",component:ve},{path:"/find-my-id",component:()=>a.e(594).then(a.bind(a,5594))},{path:"/payment",component:()=>a.e(760).then(a.bind(a,7760)),name:"paymentPage"},{path:"/verify-email",component:Ie},{path:"/admin/hotel",component:Ot},{path:"/admin/system",component:()=>a.e(518).then(a.bind(a,8518))},{path:"/reset-password",component:Ue},{path:"/search-results",component:pa},{path:"/map-view",component:ka,props:e=>({hotels:e.query.hotels?JSON.parse(e.query.hotels):[]})}],ba=(0,_.aE)({history:(0,_.LA)(),routes:ya,scrollBehavior(){return{top:0}}});var wa=ba,La=a(1999);const Ca=(0,R.Ey)();(0,s.Ef)(E).use(La.Ay,{}).use(Ca).use(wa).mount("#app");const Ia=(0,y.n)();Ia.checkLoginStatus()},6698:function(e,t,a){a.d(t,{n:function(){return n}});var s=a(5234),o=a(412);const n=(0,s.nY)("auth",{state:()=>({currentUser:null,accessToken:null,LoggedIn:!1,emailMessage:"",isEmailAvailable:!1,isVerified:!1,verificationToken:null,userId:null,userName:null,phone:null}),actions:{async signup(e){try{if(!this.verificationToken)throw new Error("이메일 인증 토큰이 없습니다.");const t=await(0,o.E_)(e,this.verificationToken);return t}catch(t){throw console.error(t),t}},async sendVerificationEmail(e,t){try{const a=await(0,o.E7)(e,t);return this.isVerified=!0,this.verificationToken=a.data,localStorage.setItem("verificationToken",a.data),a}catch(a){throw console.error("이메일 인증 메일 발송 실패:",a),this.isVerified=!1,a}},async verifyEmailToken(e){try{const t=await(0,o.vb)(e);return t&&200===t.status&&(this.isVerified=!0,this.verificationToken=e),t}catch(t){throw console.error("이메일 인증 실패:",t),this.isVerified=!1,t}},async checkEmailAvailability(e){try{const t=await(0,o.Ro)(e);this.emailMessage=t.data,this.isEmailAvailable=!0}catch(t){t.response&&409===t.response.status?this.emailMessage=t.response.data:this.emailMessage="이메일 중복 확인 중 오류가 발생했습니다.",this.isEmailAvailable=!1}},async login(e){try{const t=await(0,o.Lx)(e);this.currentUser=t.data.email,this.LoggedIn=!0,this.setAccessToken(t.data.token),this.phone=t.data.phone,this.userName=t.data.userName,this.userId=t.data.userId,console.log("로그인 성공:",t.data),localStorage.setItem("userInfo",JSON.stringify({userName:t.data.userName,userId:t.data.userId,email:t.data.email,phone:t.data.phone})),sessionStorage.setItem("token",t.data.token)}catch(t){throw console.error("로그인 실패:",t),new Error("로그인 실패")}},setAccessToken(e){this.accessToken=e,this.LoggedIn=!!e,sessionStorage.setItem("token",e)},logout(){this.currentUser=null,this.accessToken=null,this.LoggedIn=!1,this.userId=null,this.userName=null,this.phone=null,sessionStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("verificationToken"),localStorage.removeItem("verifiedEmail"),console.log("로그아웃 성공")},checkLoginStatus(){const e=sessionStorage.getItem("token"),t=localStorage.getItem("userInfo");if(e){if(this.accessToken=e,this.LoggedIn=!0,t){const e=JSON.parse(t);this.userName=e.userName,this.userId=e.userId,this.currentUser=e.email,this.phone=e.phone}}else this.LoggedIn=!1},async updateUserInfo(e){try{const t=await(0,o.J)(e,this.accessToken);return 200===t.status&&(localStorage.setItem("userInfo",JSON.stringify({...JSON.parse(localStorage.getItem("userInfo")),...e})),this.userName=e.userName,this.phone=e.phone,console.log("회원 정보 수정 성공:",t.data)),t}catch(t){throw console.error("회원 정보 수정 오류:",t),t}},async verifyPassword(e){try{const t=await(0,o.PY)(e,this.accessToken);return t}catch(t){throw console.error("비밀번호 확인 오류:",t),t}},async changePassword(e){try{const t=this.currentUser,a=localStorage.getItem("verificationToken"),s=await(0,o.UR)(t,e,a);return s}catch(t){throw console.error("비밀번호 변경 오류:",t),t}},async deactivateUser(){try{const e=await(0,o.od)(this.accessToken);return e}catch(e){throw console.error("계정 탈퇴 오류:",e),e}},async getUserInfo(){try{const e=this.accessToken;if(!e)throw new Error("로그인이 필요합니다.");const t=await(0,o.ug)(e);return t}catch(e){throw console.error("사용자 정보 가져오기 오류:",e),e}}}})}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{310:"499dd47a",518:"37d6d5ad",535:"4317c309",594:"1c7fc75b",760:"107f664e"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{310:"367c0408",518:"421eade5",535:"e1a2206f",594:"d12f0966",760:"4e44d0db"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";a.l=function(s,o,n,r){if(e[s])e[s].push(o);else{var i,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+n),i.src=s),e[s]=[o];var h=function(t,a){i.onerror=i.onload=null,clearTimeout(p);var o=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",a.nc&&(r.nonce=a.nc);var i=function(a){if(r.onerror=r.onload=null,"load"===a.type)o();else{var s=a&&a.type,i=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+i+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,r.parentNode&&r.parentNode.removeChild(r),n(l)}};return r.onerror=r.onload=i,r.href=t,s?s.parentNode.insertBefore(r,s.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var o=a[s],n=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===t))return o}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){o=r[s],n=o.getAttribute("data-href");if(n===e||n===t)return o}},s=function(s){return new Promise((function(o,n){var r=a.miniCssF(s),i=a.p+r;if(t(r,i))return o();e(s,i,null,o,n)}))},o={524:0};a.f.miniCss=function(e,t){var a={310:1,518:1,535:1,594:1,760:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=s(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,s){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var n=new Promise((function(a,s){o=e[t]=[a,s]}));s.push(o[2]=n);var r=a.p+a.u(t),i=new Error,l=function(s){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",i.name="ChunkLoadError",i.type=n,i.request=r,o[1](i)}};a.l(r,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var u=l(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(3)}));s=a.O(s)})();
//# sourceMappingURL=app.d7cafa61.js.map